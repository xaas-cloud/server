(self.webpackChunknextcloud=self.webpackChunknextcloud||[]).push([[5810,8712],{9165:(e,t,i)=>{"use strict";i.d(t,{$BT:()=>r,Brj:()=>c,HzW:()=>p,IyB:()=>s,NZC:()=>n,Tfj:()=>a,ZL5:()=>u,fEr:()=>o,jUz:()=>d,kHm:()=>h,kOJ:()=>l});var s="M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z",a="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",n="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",r="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",o="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",l="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",c="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z",h="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z",d="M17,3A2,2 0 0,1 19,5V15A2,2 0 0,1 17,17H13V19H14A1,1 0 0,1 15,20H22V22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H7C5.89,17 5,16.1 5,15V5A2,2 0 0,1 7,3H17Z",u="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",p="M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z"},12306:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".sharing-entry[data-v-251feb63]{display:flex;align-items:center;height:44px}.sharing-entry__summary[data-v-251feb63]{padding:8px;padding-inline-start:10px;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;flex:1 0;min-width:0}.sharing-entry__summary__desc[data-v-251feb63]{display:inline-block;padding-bottom:0;line-height:1.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sharing-entry__summary__desc p[data-v-251feb63],.sharing-entry__summary__desc small[data-v-251feb63]{color:var(--color-text-maxcontrast)}.sharing-entry__summary__desc-unique[data-v-251feb63]{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntry.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,yCACC,WAAA,CACA,yBAAA,CACA,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,sBAAA,CACA,QAAA,CACA,WAAA,CAEA,+CACC,oBAAA,CACA,gBAAA,CACA,iBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAEA,sGAEC,mCAAA,CAGD,sDACC,mCAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\t&__summary {\n\t\tpadding: 8px;\n\t\tpadding-inline-start: 10px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: flex-start;\n\t\tflex: 1 0;\n\t\tmin-width: 0;\n\n\t\t&__desc {\n\t\t\tdisplay: inline-block;\n\t\t\tpadding-bottom: 0;\n\t\t\tline-height: 1.2em;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\n\t\t\tp,\n\t\t\tsmall {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\n\t\t\t&-unique {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\t\t}\n\t}\n\n}\n"],sourceRoot:""}]);const o=r},12583:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".sharing-entry__internal .avatar-external[data-v-d46d5c9a]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}.sharing-entry__internal .icon-checkmark-color[data-v-d46d5c9a]{opacity:1;color:var(--color-border-success)}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryInternal.vue"],names:[],mappings:"AAEC,2DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA,CAED,gEACC,SAAA,CACA,iCAAA",sourcesContent:["\n.sharing-entry__internal {\n\t.avatar-external {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n\t.icon-checkmark-color {\n\t\topacity: 1;\n\t\tcolor: var(--color-border-success);\n\t}\n}\n"],sourceRoot:""}]);const o=r},22064:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".sharing-search{display:flex;flex-direction:column;margin-bottom:4px}.sharing-search label[for=sharing-search-input]{margin-bottom:2px}.sharing-search__input{width:100%;margin:10px 0}.vs__dropdown-menu span[lookup] .avatardiv{background-image:var(--icon-search-white);background-repeat:no-repeat;background-position:center;background-color:var(--color-text-maxcontrast) !important}.vs__dropdown-menu span[lookup] .avatardiv .avatardiv__initials-wrapper{display:none}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingInput.vue"],names:[],mappings:"AACA,gBACC,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,gDACC,iBAAA,CAGD,uBACC,UAAA,CACA,aAAA,CAOA,2CACC,yCAAA,CACA,2BAAA,CACA,0BAAA,CACA,yDAAA,CACA,wEACC,YAAA",sourcesContent:['\n.sharing-search {\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 4px;\n\n\tlabel[for="sharing-search-input"] {\n\t\tmargin-bottom: 2px;\n\t}\n\n\t&__input {\n\t\twidth: 100%;\n\t\tmargin: 10px 0;\n\t}\n}\n\n.vs__dropdown-menu {\n\t// properly style the lookup entry\n\tspan[lookup] {\n\t\t.avatardiv {\n\t\t\tbackground-image: var(--icon-search-white);\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-position: center;\n\t\t\tbackground-color: var(--color-text-maxcontrast) !important;\n\t\t\t.avatardiv__initials-wrapper {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t}\n}\n'],sourceRoot:""}]);const o=r},22441:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,"\n.sharing-tab-external-section-legacy[data-v-7c3e42b5] {\n\twidth: 100%;\n}\n","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SidebarTabExternal/SidebarTabExternalSectionLegacy.vue"],names:[],mappings:";AA6BA;CACA,WAAA;AACA",sourcesContent:['\x3c!--\n  - SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t<div class="sharing-tab-external-section-legacy">\n\t\t<component :is="component" :file-info="fileInfo" />\n\t</div>\n</template>\n\n<script lang="ts" setup>\nimport { computed, type Component, type PropType } from \'vue\'\n\nconst props = defineProps({\n\tfileInfo: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tsectionCallback: {\n\t\ttype: Function as PropType<(el: HTMLElement | undefined, fileInfo: unknown) => Component>,\n\t\trequired: true,\n\t},\n})\n\nconst component = computed(() => props.sectionCallback(undefined, props.fileInfo))\n<\/script>\n\n<style scoped>\n.sharing-tab-external-section-legacy {\n\twidth: 100%;\n}\n</style>\n'],sourceRoot:""}]);const o=r},30255:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".sharing-entry__inherited .avatar-shared[data-v-22d51ef0]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingInherited.vue"],names:[],mappings:"AAEC,0DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA",sourcesContent:["\n.sharing-entry__inherited {\n\t.avatar-shared {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n}\n"],sourceRoot:""}]);const o=r},35810:(e,t,i)=>{"use strict";i.d(t,{Al:()=>o.r,H4:()=>o.c,KT:()=>R,My:()=>M,Q$:()=>o.e,R3:()=>o.n,VL:()=>o.l,di:()=>L,lJ:()=>o.d,nF:()=>P,pt:()=>o.F,ur:()=>$,v7:()=>V});var s,a,n,r,o=i(1822),l=i(380),c=i(83141),h=i(87485),d=(i(43627),i(53334)),u=i(65606),p=i(62045).hp;function f(){if(a)return s;a=1;const e="object"==typeof u&&u.env&&u.env.NODE_DEBUG&&/\bsemver\b/i.test(u.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};return s=e}function A(){if(r)return n;r=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return n={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}var g,m,_,C,y,w,v,E,b,S,x,T,I,D={exports:{}};function k(){if(v)return w;v=1;const e=f(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:i}=A(),{safeRe:s,t:a}=(g||(g=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:a}=A(),n=f(),r=(t=e.exports={}).re=[],o=t.safeRe=[],l=t.src=[],c=t.t={};let h=0;const d="[a-zA-Z0-9-]",u=[["\\s",1],["\\d",a],[d,s]],p=(e,t,i)=>{const s=(e=>{for(const[t,i]of u)e=e.split(`${t}*`).join(`${t}{0,${i}}`).split(`${t}+`).join(`${t}{1,${i}}`);return e})(t),a=h++;n(e,a,t),c[e]=a,l[a]=t,r[a]=new RegExp(t,i?"g":void 0),o[a]=new RegExp(s,i?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),p("FULL",`^${l[c.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),p("LOOSE",`^${l[c.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),p("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?`),p("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[c.COERCE],!0),p("COERCERTLFULL",l[c.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(D,D.exports)),D.exports),n=function(){if(_)return m;_=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return m=i=>i?"object"!=typeof i?e:i:t}(),{compareIdentifiers:r}=function(){if(y)return C;y=1;const e=/^[0-9]+$/,t=(t,i)=>{const s=e.test(t),a=e.test(i);return s&&a&&(t=+t,i=+i),t===i?0:s&&!a?-1:a&&!s?1:t<i?-1:1};return C={compareIdentifiers:t,rcompareIdentifiers:(e,i)=>t(i,e)}}();class o{constructor(r,l){if(l=n(l),r instanceof o){if(r.loose===!!l.loose&&r.includePrerelease===!!l.includePrerelease)return r;r=r.version}else if("string"!=typeof r)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",r,l),this.options=l,this.loose=!!l.loose,this.includePrerelease=!!l.includePrerelease;const c=r.trim().match(l.loose?s[a.LOOSE]:s[a.FULL]);if(!c)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e("SemVer.compare",this.version,this.options,t),!(t instanceof o)){if("string"==typeof t&&t===this.version)return 0;t=new o(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(e){return e instanceof o||(e=new o(e,this.options)),r(this.major,e.major)||r(this.minor,e.minor)||r(this.patch,e.patch)}comparePre(t){if(t instanceof o||(t=new o(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let i=0;do{const s=this.prerelease[i],a=t.prerelease[i];if(e("prerelease compare",i,s,a),void 0===s&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===s)return-1;if(s!==a)return r(s,a)}while(++i)}compareBuild(t){t instanceof o||(t=new o(t,this.options));let i=0;do{const s=this.build[i],a=t.build[i];if(e("build compare",i,s,a),void 0===s&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===s)return-1;if(s!==a)return r(s,a)}while(++i)}inc(e,t,i){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,i),this.inc("pre",t,i);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,i),this.inc("pre",t,i);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(i)?1:0;if(!t&&!1===i)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let s=this.prerelease.length;for(;--s>=0;)"number"==typeof this.prerelease[s]&&(this.prerelease[s]++,s=-2);if(-1===s){if(t===this.prerelease.join(".")&&!1===i)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let s=[t,e];!1===i&&(s=[t]),0===r(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return w=o}!function(){if(x)return S;x=1;const e=function(){if(b)return E;b=1;const e=k();return E=(t,i,s=!1)=>{if(t instanceof e)return t;try{return new e(t,i)}catch(e){if(!s)return null;throw e}}}();S=(t,i)=>{const s=e(t,i);return s?s.version:null}}(),function(){if(I)return T;I=1;const e=k();T=(t,i)=>new e(t,i).major}(),l.m;var N;N||(N=1,function(e){e.parser=function(e,t){return new s(e,t)},e.SAXParser=s,e.SAXStream=n,e.createStream=function(e,t){return new n(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function s(t,a){if(!(this instanceof s))return new s(t,a);var n=this;!function(e){for(var t=0,s=i.length;t<s;t++)e[i[t]]=""}(n),n.q=n.c="",n.bufferCheckPosition=e.MAX_BUFFER_LENGTH,n.opt=a||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!t,n.noscript=!(!t&&!n.opt.noscript),n.state=S.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(d)),void 0===n.opt.unquotedAttributeValues&&(n.opt.unquotedAttributeValues=!t),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),T(n,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}),s.prototype={end:function(){P(this)},write:function(t){var s=this;if(this.error)throw this.error;if(s.closed)return N(s,"Cannot write after close. Assign an onready handler.");if(null===t)return P(s);"object"==typeof t&&(t=t.toString());for(var a=0,n="";n=U(t,a++),s.c=n,n;)switch(s.trackPosition&&(s.position++,"\n"===n?(s.line++,s.column=0):s.column++),s.state){case S.BEGIN:if(s.state=S.BEGIN_WHITESPACE,"\ufeff"===n)continue;$(s,n);continue;case S.BEGIN_WHITESPACE:$(s,n);continue;case S.TEXT:if(s.sawRoot&&!s.closedRoot){for(var l=a-1;n&&"<"!==n&&"&"!==n;)(n=U(t,a++))&&s.trackPosition&&(s.position++,"\n"===n?(s.line++,s.column=0):s.column++);s.textNode+=t.substring(l,a-1)}"<"!==n||s.sawRoot&&s.closedRoot&&!s.strict?(m(n)||s.sawRoot&&!s.closedRoot||L(s,"Text data outside of root node."),"&"===n?s.state=S.TEXT_ENTITY:s.textNode+=n):(s.state=S.OPEN_WAKA,s.startTagPosition=s.position);continue;case S.SCRIPT:"<"===n?s.state=S.SCRIPT_ENDING:s.script+=n;continue;case S.SCRIPT_ENDING:"/"===n?s.state=S.CLOSE_TAG:(s.script+="<"+n,s.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===n)s.state=S.SGML_DECL,s.sgmlDecl="";else if(m(n));else if(y(u,n))s.state=S.OPEN_TAG,s.tagName=n;else if("/"===n)s.state=S.CLOSE_TAG,s.tagName="";else if("?"===n)s.state=S.PROC_INST,s.procInstName=s.procInstBody="";else{if(L(s,"Unencoded <"),s.startTagPosition+1<s.position){var c=s.position-s.startTagPosition;n=new Array(c).join(" ")+n}s.textNode+="<"+n,s.state=S.TEXT}continue;case S.SGML_DECL:if(s.sgmlDecl+n==="--"){s.state=S.COMMENT,s.comment="",s.sgmlDecl="";continue}s.doctype&&!0!==s.doctype&&s.sgmlDecl?(s.state=S.DOCTYPE_DTD,s.doctype+="<!"+s.sgmlDecl+n,s.sgmlDecl=""):(s.sgmlDecl+n).toUpperCase()===r?(I(s,"onopencdata"),s.state=S.CDATA,s.sgmlDecl="",s.cdata=""):(s.sgmlDecl+n).toUpperCase()===o?(s.state=S.DOCTYPE,(s.doctype||s.sawRoot)&&L(s,"Inappropriately located doctype declaration"),s.doctype="",s.sgmlDecl=""):">"===n?(I(s,"onsgmldeclaration",s.sgmlDecl),s.sgmlDecl="",s.state=S.TEXT):_(n)?(s.state=S.SGML_DECL_QUOTED,s.sgmlDecl+=n):s.sgmlDecl+=n;continue;case S.SGML_DECL_QUOTED:n===s.q&&(s.state=S.SGML_DECL,s.q=""),s.sgmlDecl+=n;continue;case S.DOCTYPE:">"===n?(s.state=S.TEXT,I(s,"ondoctype",s.doctype),s.doctype=!0):(s.doctype+=n,"["===n?s.state=S.DOCTYPE_DTD:_(n)&&(s.state=S.DOCTYPE_QUOTED,s.q=n));continue;case S.DOCTYPE_QUOTED:s.doctype+=n,n===s.q&&(s.q="",s.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:"]"===n?(s.doctype+=n,s.state=S.DOCTYPE):"<"===n?(s.state=S.OPEN_WAKA,s.startTagPosition=s.position):_(n)?(s.doctype+=n,s.state=S.DOCTYPE_DTD_QUOTED,s.q=n):s.doctype+=n;continue;case S.DOCTYPE_DTD_QUOTED:s.doctype+=n,n===s.q&&(s.state=S.DOCTYPE_DTD,s.q="");continue;case S.COMMENT:"-"===n?s.state=S.COMMENT_ENDING:s.comment+=n;continue;case S.COMMENT_ENDING:"-"===n?(s.state=S.COMMENT_ENDED,s.comment=k(s.opt,s.comment),s.comment&&I(s,"oncomment",s.comment),s.comment=""):(s.comment+="-"+n,s.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==n?(L(s,"Malformed comment"),s.comment+="--"+n,s.state=S.COMMENT):s.doctype&&!0!==s.doctype?s.state=S.DOCTYPE_DTD:s.state=S.TEXT;continue;case S.CDATA:"]"===n?s.state=S.CDATA_ENDING:s.cdata+=n;continue;case S.CDATA_ENDING:"]"===n?s.state=S.CDATA_ENDING_2:(s.cdata+="]"+n,s.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===n?(s.cdata&&I(s,"oncdata",s.cdata),I(s,"onclosecdata"),s.cdata="",s.state=S.TEXT):"]"===n?s.cdata+="]":(s.cdata+="]]"+n,s.state=S.CDATA);continue;case S.PROC_INST:"?"===n?s.state=S.PROC_INST_ENDING:m(n)?s.state=S.PROC_INST_BODY:s.procInstName+=n;continue;case S.PROC_INST_BODY:if(!s.procInstBody&&m(n))continue;"?"===n?s.state=S.PROC_INST_ENDING:s.procInstBody+=n;continue;case S.PROC_INST_ENDING:">"===n?(I(s,"onprocessinginstruction",{name:s.procInstName,body:s.procInstBody}),s.procInstName=s.procInstBody="",s.state=S.TEXT):(s.procInstBody+="?"+n,s.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:y(f,n)?s.tagName+=n:(R(s),">"===n?V(s):"/"===n?s.state=S.OPEN_TAG_SLASH:(m(n)||L(s,"Invalid character in tag name"),s.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===n?(V(s,!0),B(s)):(L(s,"Forward-slash in opening tag not followed by >"),s.state=S.ATTRIB);continue;case S.ATTRIB:if(m(n))continue;">"===n?V(s):"/"===n?s.state=S.OPEN_TAG_SLASH:y(u,n)?(s.attribName=n,s.attribValue="",s.state=S.ATTRIB_NAME):L(s,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===n?s.state=S.ATTRIB_VALUE:">"===n?(L(s,"Attribute without value"),s.attribValue=s.attribName,F(s),V(s)):m(n)?s.state=S.ATTRIB_NAME_SAW_WHITE:y(f,n)?s.attribName+=n:L(s,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===n)s.state=S.ATTRIB_VALUE;else{if(m(n))continue;L(s,"Attribute without value"),s.tag.attributes[s.attribName]="",s.attribValue="",I(s,"onattribute",{name:s.attribName,value:""}),s.attribName="",">"===n?V(s):y(u,n)?(s.attribName=n,s.state=S.ATTRIB_NAME):(L(s,"Invalid attribute name"),s.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(m(n))continue;_(n)?(s.q=n,s.state=S.ATTRIB_VALUE_QUOTED):(s.opt.unquotedAttributeValues||N(s,"Unquoted attribute value"),s.state=S.ATTRIB_VALUE_UNQUOTED,s.attribValue=n);continue;case S.ATTRIB_VALUE_QUOTED:if(n!==s.q){"&"===n?s.state=S.ATTRIB_VALUE_ENTITY_Q:s.attribValue+=n;continue}F(s),s.q="",s.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:m(n)?s.state=S.ATTRIB:">"===n?V(s):"/"===n?s.state=S.OPEN_TAG_SLASH:y(u,n)?(L(s,"No whitespace between attributes"),s.attribName=n,s.attribValue="",s.state=S.ATTRIB_NAME):L(s,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!C(n)){"&"===n?s.state=S.ATTRIB_VALUE_ENTITY_U:s.attribValue+=n;continue}F(s),">"===n?V(s):s.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(s.tagName)">"===n?B(s):y(f,n)?s.tagName+=n:s.script?(s.script+="</"+s.tagName,s.tagName="",s.state=S.SCRIPT):(m(n)||L(s,"Invalid tagname in closing tag"),s.state=S.CLOSE_TAG_SAW_WHITE);else{if(m(n))continue;w(u,n)?s.script?(s.script+="</"+n,s.state=S.SCRIPT):L(s,"Invalid tagname in closing tag."):s.tagName=n}continue;case S.CLOSE_TAG_SAW_WHITE:if(m(n))continue;">"===n?B(s):L(s,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var h,d;switch(s.state){case S.TEXT_ENTITY:h=S.TEXT,d="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:h=S.ATTRIB_VALUE_QUOTED,d="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:h=S.ATTRIB_VALUE_UNQUOTED,d="attribValue"}if(";"===n){var p=M(s);s.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(p)?(s.entity="",s.state=h,s.write(p)):(s[d]+=p,s.entity="",s.state=h)}else y(s.entity.length?g:A,n)?s.entity+=n:(L(s,"Invalid character in entity name"),s[d]+="&"+s.entity+n,s.entity="",s.state=h);continue;default:throw new Error(s,"Unknown state: "+s.state)}return s.position>=s.bufferCheckPosition&&function(t){for(var s=Math.max(e.MAX_BUFFER_LENGTH,10),a=0,n=0,r=i.length;n<r;n++){var o=t[i[n]].length;if(o>s)switch(i[n]){case"textNode":D(t);break;case"cdata":I(t,"oncdata",t.cdata),t.cdata="";break;case"script":I(t,"onscript",t.script),t.script="";break;default:N(t,"Max buffer length exceeded: "+i[n])}a=Math.max(a,o)}var l=e.MAX_BUFFER_LENGTH-a;t.bufferCheckPosition=l+t.position}(s),s},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;D(e=this),""!==e.cdata&&(I(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(I(e,"onscript",e.script),e.script="")}};try{t=require("stream").Stream}catch(e){t=function(){}}t||(t=function(){});var a=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function n(e,i){if(!(this instanceof n))return new n(e,i);t.apply(this),this._parser=new s(e,i),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,a.forEach(function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})})}n.prototype=Object.create(t.prototype,{constructor:{value:n}}),n.prototype.write=function(e){if("function"==typeof p&&"function"==typeof p.isBuffer&&p.isBuffer(e)){if(!this._decoder){var t=c.I;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},n.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},n.prototype.on=function(e,i){var s=this;return s._parser["on"+e]||-1===a.indexOf(e)||(s._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),s.emit.apply(s,t)}),t.prototype.on.call(s,e,i)};var r="[CDATA[",o="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",d={xml:l,xmlns:h},u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function m(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function _(e){return'"'===e||"'"===e}function C(e){return">"===e||m(e)}function y(e,t){return e.test(t)}function w(e,t){return!y(e,t)}var v,E,b,S=0;for(var x in e.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var i=e.ENTITIES[t],s="number"==typeof i?String.fromCharCode(i):i;e.ENTITIES[t]=s}),e.STATE)e.STATE[e.STATE[x]]=x;function T(e,t,i){e[t]&&e[t](i)}function I(e,t,i){e.textNode&&D(e),T(e,t,i)}function D(e){e.textNode=k(e.opt,e.textNode),e.textNode&&T(e,"ontext",e.textNode),e.textNode=""}function k(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function N(e,t){return D(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,T(e,"onerror",t),e}function P(e){return e.sawRoot&&!e.closedRoot&&L(e,"Unclosed root tag"),e.state!==S.BEGIN&&e.state!==S.BEGIN_WHITESPACE&&e.state!==S.TEXT&&N(e,"Unexpected end"),D(e),e.c="",e.closed=!0,T(e,"onend"),s.call(e,e.strict,e.opt),e}function L(e,t){if("object"!=typeof e||!(e instanceof s))throw new Error("bad call to strictFail");e.strict&&N(e,t)}function R(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,i=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(i.ns=t.ns),e.attribList.length=0,I(e,"onopentagstart",i)}function O(e,t){var i=e.indexOf(":")<0?["",e]:e.split(":"),s=i[0],a=i[1];return t&&"xmlns"===e&&(s="xmlns",a=""),{prefix:s,local:a}}function F(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=O(e.attribName,!0),i=t.prefix,s=t.local;if("xmlns"===i)if("xml"===s&&e.attribValue!==l)L(e,"xml: prefix must be bound to "+l+"\nActual: "+e.attribValue);else if("xmlns"===s&&e.attribValue!==h)L(e,"xmlns: prefix must be bound to "+h+"\nActual: "+e.attribValue);else{var a=e.tag,n=e.tags[e.tags.length-1]||e;a.ns===n.ns&&(a.ns=Object.create(n.ns)),a.ns[s]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,I(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function V(e,t){if(e.opt.xmlns){var i=e.tag,s=O(e.tagName);i.prefix=s.prefix,i.local=s.local,i.uri=i.ns[s.prefix]||"",i.prefix&&!i.uri&&(L(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),i.uri=s.prefix);var a=e.tags[e.tags.length-1]||e;i.ns&&a.ns!==i.ns&&Object.keys(i.ns).forEach(function(t){I(e,"onopennamespace",{prefix:t,uri:i.ns[t]})});for(var n=0,r=e.attribList.length;n<r;n++){var o=e.attribList[n],l=o[0],c=o[1],h=O(l,!0),d=h.prefix,u=h.local,p=""===d?"":i.ns[d]||"",f={name:l,value:c,prefix:d,local:u,uri:p};d&&"xmlns"!==d&&!p&&(L(e,"Unbound namespace prefix: "+JSON.stringify(d)),f.uri=d),e.tag.attributes[l]=f,I(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),I(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=S.TEXT:e.state=S.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function B(e){if(!e.tagName)return L(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=S.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=S.SCRIPT);I(e,"onscript",e.script),e.script=""}var t=e.tags.length,i=e.tagName;e.strict||(i=i[e.looseCase]());for(var s=i;t--&&e.tags[t].name!==s;)L(e,"Unexpected close tag");if(t<0)return L(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=S.TEXT);e.tagName=i;for(var a=e.tags.length;a-- >t;){var n=e.tag=e.tags.pop();e.tagName=e.tag.name,I(e,"onclosetag",e.tagName);var r={};for(var o in n.ns)r[o]=n.ns[o];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&n.ns!==l.ns&&Object.keys(n.ns).forEach(function(t){var i=n.ns[t];I(e,"onclosenamespace",{prefix:t,uri:i})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=S.TEXT}function M(e){var t,i=e.entity,s=i.toLowerCase(),a="";return e.ENTITIES[i]?e.ENTITIES[i]:e.ENTITIES[s]?e.ENTITIES[s]:("#"===(i=s).charAt(0)&&("x"===i.charAt(1)?(i=i.slice(2),a=(t=parseInt(i,16)).toString(16)):(i=i.slice(1),a=(t=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),isNaN(t)||a.toLowerCase()!==i?(L(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function $(e,t){"<"===t?(e.state=S.OPEN_WAKA,e.startTagPosition=e.position):m(t)||(L(e,"Non-whitespace before first tag."),e.textNode=t,e.state=S.TEXT)}function U(e,t){var i="";return t<e.length&&(i=e.charAt(t)),i}S=e.STATE,String.fromCodePoint||(v=String.fromCharCode,E=Math.floor,b=function(){var e,t,i=[],s=-1,a=arguments.length;if(!a)return"";for(var n="";++s<a;){var r=Number(arguments[s]);if(!isFinite(r)||r<0||r>1114111||E(r)!==r)throw RangeError("Invalid code point: "+r);r<=65535?i.push(r):(e=55296+((r-=65536)>>10),t=r%1024+56320,i.push(e,t)),(s+1===a||i.length>16384)&&(n+=v.apply(null,i),i.length=0)}return n},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:b,configurable:!0,writable:!0}):String.fromCodePoint=b)}({}));var P=(e=>(e.ReservedName="reserved name",e.Character="character",e.Extension="extension",e))(P||{});class L extends Error{constructor(e){super(`Invalid ${e.reason} '${e.segment}' in filename '${e.filename}'`,{cause:e})}get filename(){return this.cause.filename}get reason(){return this.cause.reason}get segment(){return this.cause.segment}}function R(e){const t=(0,h.F)().files,i=t.forbidden_filename_characters??window._oc_config?.forbidden_filenames_characters??["/","\\"];for(const t of i)if(e.includes(t))throw new L({segment:t,reason:"character",filename:e});if(e=e.toLocaleLowerCase(),(t.forbidden_filenames??[".htaccess"]).includes(e))throw new L({filename:e,segment:e,reason:"reserved name"});const s=e.indexOf(".",1),a=e.substring(0,-1===s?void 0:s);if((t.forbidden_filename_basenames??[]).includes(a))throw new L({filename:e,segment:a,reason:"reserved name"});const n=t.forbidden_filename_extensions??[".part",".filepart"];for(const t of n)if(e.length>t.length&&e.endsWith(t))throw new L({segment:t,reason:"extension",filename:e})}const O=["B","KB","MB","GB","TB","PB"],F=["B","KiB","MiB","GiB","TiB","PiB"];function V(e,t=!1,i=!1,s=!1){i=i&&!s,"string"==typeof e&&(e=Number(e));let a=e>0?Math.floor(Math.log(e)/Math.log(s?1e3:1024)):0;a=Math.min((i?F.length:O.length)-1,a);const n=i?F[a]:O[a];let r=(e/Math.pow(s?1e3:1024,a)).toFixed(1);return!0===t&&0===a?("0.0"!==r?"< 1 ":"0 ")+(i?F[1]:O[1]):(r=a<2?parseFloat(r).toFixed(0):parseFloat(r).toLocaleString((0,d.lO)()),r+" "+n)}function B(e){return e instanceof Date?e.toISOString():String(e)}function M(e,t,i){i=i??[];const s=(t=t??[e=>e]).map((e,t)=>"asc"===(i[t]??"asc")?1:-1),a=Intl.Collator([(0,d.Z0)(),(0,d.lO)()],{numeric:!0,usage:"sort"});return[...e].sort((e,i)=>{for(const[n,r]of t.entries()){const t=a.compare(B(r(e)),B(r(i)));if(0!==t)return t*s[n]}return 0})}function $(e,t={}){const i={sortingMode:"basename",sortingOrder:"asc",...t};return M(e,[...i.sortFavoritesFirst?[e=>1!==e.attributes?.favorite]:[],...i.sortFoldersFirst?[e=>"folder"!==e.type]:[],..."basename"!==i.sortingMode?[e=>e[i.sortingMode]??e.attributes[i.sortingMode]]:[],e=>{return(t=e.displayname||e.attributes?.displayname||e.basename||"").lastIndexOf(".")>0?t.slice(0,t.lastIndexOf(".")):t;var t},e=>e.basename],[...i.sortFavoritesFirst?["asc"]:[],...i.sortFoldersFirst?["asc"]:[],..."mtime"===i.sortingMode?["asc"===i.sortingOrder?"desc":"asc"]:[],..."mtime"!==i.sortingMode&&"basename"!==i.sortingMode?[i.sortingOrder]:[],i.sortingOrder,i.sortingOrder])}},43570:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".sharing-entry[data-v-44339fa4]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-44339fa4]{padding:8px;padding-inline-start:10px;line-height:1.2em;position:relative;flex:1 1;min-width:0}.sharing-entry__desc p[data-v-44339fa4]{color:var(--color-text-maxcontrast)}.sharing-entry__title[data-v-44339fa4]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:inherit}.sharing-entry__actions[data-v-44339fa4]{margin-inline-start:auto !important}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntrySimple.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,WAAA,CACA,yBAAA,CACA,iBAAA,CACA,iBAAA,CACA,QAAA,CACA,WAAA,CACA,wCACC,mCAAA,CAGF,uCACC,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,iBAAA,CAED,yCACC,mCAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\t&__desc {\n\t\tpadding: 8px;\n\t\tpadding-inline-start: 10px;\n\t\tline-height: 1.2em;\n\t\tposition: relative;\n\t\tflex: 1 1;\n\t\tmin-width: 0;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__title {\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\tmax-width: inherit;\n\t}\n\t&__actions {\n\t\tmargin-inline-start: auto !important;\n\t}\n}\n"],sourceRoot:""}]);const o=r},48318:function(e,t,i){!function(e){"use strict";var t,i=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(e){}return null}(),s=i&&"a=1"===new i({a:1}).toString(),a=i&&"+"===new i("s=%2B").get("s"),n=i&&"size"in i.prototype,r="__URLSearchParams__",o=!i||((t=new i).append("s"," &"),"s=+%26"===t.toString()),l=p.prototype,c=!(!e.Symbol||!e.Symbol.iterator);if(!(i&&s&&a&&o&&n)){l.append=function(e,t){_(this[r],e,t)},l.delete=function(e){delete this[r][e]},l.get=function(e){var t=this[r];return this.has(e)?t[e][0]:null},l.getAll=function(e){var t=this[r];return this.has(e)?t[e].slice(0):[]},l.has=function(e){return y(this[r],e)},l.set=function(e,t){this[r][e]=[""+t]},l.toString=function(){var e,t,i,s,a=this[r],n=[];for(t in a)for(i=f(t),e=0,s=a[t];e<s.length;e++)n.push(i+"="+f(s[e]));return n.join("&")};var h,d=e.Proxy&&i&&(!a||!o||!s||!n);d?(h=new Proxy(i,{construct:function(e,t){return new e(new p(t[0]).toString())}})).toString=Function.prototype.toString.bind(p):h=p,Object.defineProperty(e,"URLSearchParams",{value:h});var u=e.URLSearchParams.prototype;u.polyfill=!0,!d&&e.Symbol&&(u[e.Symbol.toStringTag]="URLSearchParams"),"forEach"in u||(u.forEach=function(e,t){var i=m(this.toString());Object.getOwnPropertyNames(i).forEach(function(s){i[s].forEach(function(i){e.call(t,i,s,this)},this)},this)}),"sort"in u||(u.sort=function(){var e,t,i,s=m(this.toString()),a=[];for(e in s)a.push(e);for(a.sort(),t=0;t<a.length;t++)this.delete(a[t]);for(t=0;t<a.length;t++){var n=a[t],r=s[n];for(i=0;i<r.length;i++)this.append(n,r[i])}}),"keys"in u||(u.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),g(e)}),"values"in u||(u.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),g(e)}),"entries"in u||(u.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),g(e)}),c&&(u[e.Symbol.iterator]=u[e.Symbol.iterator]||u.entries),"size"in u||Object.defineProperty(u,"size",{get:function(){var e=m(this.toString());if(u===this)throw new TypeError("Illegal invocation at URLSearchParams.invokeGetter");return Object.keys(e).reduce(function(t,i){return t+e[i].length},0)}})}function p(e){((e=e||"")instanceof URLSearchParams||e instanceof p)&&(e=e.toString()),this[r]=m(e)}function f(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(e){return t[e]})}function A(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,function(e){return decodeURIComponent(e)})}function g(t){var i={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c&&(i[e.Symbol.iterator]=function(){return i}),i}function m(e){var t={};if("object"==typeof e)if(C(e))for(var i=0;i<e.length;i++){var s=e[i];if(!C(s)||2!==s.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");_(t,s[0],s[1])}else for(var a in e)e.hasOwnProperty(a)&&_(t,a,e[a]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var n=e.split("&"),r=0;r<n.length;r++){var o=n[r],l=o.indexOf("=");-1<l?_(t,A(o.slice(0,l)),A(o.slice(l+1))):o&&_(t,A(o),"")}}return t}function _(e,t,i){var s="string"==typeof i?i:null!=i&&"function"==typeof i.toString?i.toString():JSON.stringify(i);y(e,t)?e[t].push(s):e[t]=[s]}function C(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(void 0!==i.g?i.g:"undefined"!=typeof window?window:this)},50326:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".share-select[data-v-f7c55cbc]{display:block}.share-select[data-v-f7c55cbc] .action-item__menutoggle{color:var(--color-primary-element) !important;font-size:12.5px !important;height:auto !important;min-height:auto !important}.share-select[data-v-f7c55cbc] .action-item__menutoggle .button-vue__text{font-weight:normal !important}.share-select[data-v-f7c55cbc] .action-item__menutoggle .button-vue__icon{height:24px !important;min-height:24px !important;width:24px !important;min-width:24px !important}.share-select[data-v-f7c55cbc] .action-item__menutoggle .button-vue__wrapper{flex-direction:row-reverse !important}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryQuickShareSelect.vue"],names:[],mappings:"AACA,+BACC,aAAA,CAIA,wDACC,6CAAA,CACA,2BAAA,CACA,sBAAA,CACA,0BAAA,CAEA,0EACC,6BAAA,CAGD,0EACC,sBAAA,CACA,0BAAA,CACA,qBAAA,CACA,yBAAA,CAGD,6EAEC,qCAAA",sourcesContent:["\n.share-select {\n\tdisplay: block;\n\n\t// TODO: NcActions should have a slot for custom trigger button like NcPopover\n\t// Overrider NcActionms button to make it small\n\t:deep(.action-item__menutoggle) {\n\t\tcolor: var(--color-primary-element) !important;\n\t\tfont-size: 12.5px !important;\n\t\theight: auto !important;\n\t\tmin-height: auto !important;\n\n\t\t.button-vue__text {\n\t\t\tfont-weight: normal !important;\n\t\t}\n\n\t\t.button-vue__icon {\n\t\t\theight: 24px !important;\n\t\t\tmin-height: 24px !important;\n\t\t\twidth: 24px !important;\n\t\t\tmin-width: 24px !important;\n\t\t}\n\n\t\t.button-vue__wrapper {\n\t\t\t// Emulate NcButton's alignment=center-reverse\n\t\t\tflex-direction: row-reverse !important;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const o=r},59879:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".sharing-entry[data-v-fe8ed59e]{display:flex;align-items:center;height:44px}.sharing-entry__desc[data-v-fe8ed59e]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;padding-inline-start:10px;line-height:1.2em}.sharing-entry__desc p[data-v-fe8ed59e]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-fe8ed59e]{margin-inline-start:auto}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryInherited.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,yBAAA,CACA,iBAAA,CACA,wCACC,mCAAA,CAGF,yCACC,wBAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tpadding: 8px;\n\t\tpadding-inline-start: 10px;\n\t\tline-height: 1.2em;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__actions {\n\t\tmargin-inline-start: auto;\n\t}\n}\n"],sourceRoot:""}]);const o=r},63316:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".share-expiry-time[data-v-46cd2ca2]{display:inline-flex;align-items:center;justify-content:center}.share-expiry-time .hint-icon[data-v-46cd2ca2]{padding:0;margin:0;width:24px;height:24px}.hint-heading[data-v-46cd2ca2]{text-align:center;font-size:1rem;margin-top:8px;padding-bottom:8px;margin-bottom:0;border-bottom:1px solid var(--color-border)}.hint-body[data-v-46cd2ca2]{padding:var(--border-radius-element);max-width:300px}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/ShareExpiryTime.vue"],names:[],mappings:"AACA,oCACI,mBAAA,CACA,kBAAA,CACA,sBAAA,CAEA,+CACI,SAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CAIR,+BACI,iBAAA,CACA,cAAA,CACA,cAAA,CACA,kBAAA,CACA,eAAA,CACA,2CAAA,CAGJ,4BACI,oCAAA,CACA,eAAA",sourcesContent:["\n.share-expiry-time {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n\n    .hint-icon {\n        padding: 0;\n        margin: 0;\n        width: 24px;\n        height: 24px;\n    }\n}\n\n.hint-heading {\n    text-align: center;\n    font-size: 1rem;\n    margin-top: 8px;\n    padding-bottom: 8px;\n    margin-bottom: 0;\n    border-bottom: 1px solid var(--color-border);\n}\n\n.hint-body {\n    padding: var(--border-radius-element);\n    max-width: 300px;\n}\n"],sourceRoot:""}]);const o=r},71547:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".sharingTabDetailsView[data-v-52070568]{display:flex;flex-direction:column;width:100%;margin:0 auto;position:relative;height:100%;overflow:hidden}.sharingTabDetailsView__header[data-v-52070568]{display:flex;align-items:center;box-sizing:border-box;margin:.2em}.sharingTabDetailsView__header span[data-v-52070568]{display:flex;align-items:center}.sharingTabDetailsView__header span h1[data-v-52070568]{font-size:15px;padding-inline-start:.3em}.sharingTabDetailsView__wrapper[data-v-52070568]{position:relative;overflow:scroll;flex-shrink:1;padding:4px;padding-inline-end:12px}.sharingTabDetailsView__quick-permissions[data-v-52070568]{display:flex;justify-content:center;width:100%;margin:0 auto;border-radius:0}.sharingTabDetailsView__quick-permissions div[data-v-52070568]{width:100%}.sharingTabDetailsView__quick-permissions div span[data-v-52070568]{width:100%}.sharingTabDetailsView__quick-permissions div span span[data-v-52070568]:nth-child(1){align-items:center;justify-content:center;padding:.1em}.sharingTabDetailsView__quick-permissions div span[data-v-52070568] label span{display:flex;flex-direction:column}.sharingTabDetailsView__quick-permissions div span[data-v-52070568] span.checkbox-content__text.checkbox-radio-switch__text{flex-wrap:wrap}.sharingTabDetailsView__quick-permissions div span[data-v-52070568] span.checkbox-content__text.checkbox-radio-switch__text .subline{display:block;flex-basis:100%}.sharingTabDetailsView__advanced-control[data-v-52070568]{width:100%}.sharingTabDetailsView__advanced-control button[data-v-52070568]{margin-top:.5em}.sharingTabDetailsView__advanced[data-v-52070568]{width:100%;margin-bottom:.5em;text-align:start;padding-inline-start:0}.sharingTabDetailsView__advanced section textarea[data-v-52070568],.sharingTabDetailsView__advanced section div.mx-datepicker[data-v-52070568]{width:100%}.sharingTabDetailsView__advanced section textarea[data-v-52070568]{height:80px;margin:0}.sharingTabDetailsView__advanced section span[data-v-52070568] label{padding-inline-start:0 !important;background-color:initial !important;border:none !important}.sharingTabDetailsView__advanced section section.custom-permissions-group[data-v-52070568]{padding-inline-start:1.5em}.sharingTabDetailsView__label[data-v-52070568]{padding-block-end:6px}.sharingTabDetailsView__delete>button[data-v-52070568]:first-child{color:#df0707}.sharingTabDetailsView__footer[data-v-52070568]{width:100%;display:flex;position:sticky;bottom:0;flex-direction:column;justify-content:space-between;align-items:flex-start;background:linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background))}.sharingTabDetailsView__footer .button-group[data-v-52070568]{display:flex;justify-content:space-between;width:100%;margin-top:16px}.sharingTabDetailsView__footer .button-group button[data-v-52070568]{margin-inline-start:16px}.sharingTabDetailsView__footer .button-group button[data-v-52070568]:first-child{margin-inline-start:0}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingDetailsTab.vue"],names:[],mappings:"AACA,wCACC,YAAA,CACA,qBAAA,CACA,UAAA,CACA,aAAA,CACA,iBAAA,CACA,WAAA,CACA,eAAA,CAEA,gDACC,YAAA,CACA,kBAAA,CACA,qBAAA,CACA,WAAA,CAEA,qDACC,YAAA,CACA,kBAAA,CAEA,wDACC,cAAA,CACA,yBAAA,CAMH,iDACC,iBAAA,CACA,eAAA,CACA,aAAA,CACA,WAAA,CACA,uBAAA,CAGD,2DACC,YAAA,CACA,sBAAA,CACA,UAAA,CACA,aAAA,CACA,eAAA,CAEA,+DACC,UAAA,CAEA,oEACC,UAAA,CAEA,sFACC,kBAAA,CACA,sBAAA,CACA,YAAA,CAGD,+EACC,YAAA,CACA,qBAAA,CAID,4HACC,cAAA,CAEA,qIACC,aAAA,CACA,eAAA,CAQL,0DACC,UAAA,CAEA,iEACC,eAAA,CAKF,kDACC,UAAA,CACA,kBAAA,CACA,gBAAA,CACA,sBAAA,CAIC,+IAEC,UAAA,CAGD,mEACC,WAAA,CACA,QAAA,CAYD,qEACC,iCAAA,CACA,mCAAA,CACA,sBAAA,CAGD,2FACC,0BAAA,CAKH,+CACC,qBAAA,CAIA,mEACC,aAAA,CAIF,gDACC,UAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CACA,qBAAA,CACA,6BAAA,CACA,sBAAA,CACA,2FAAA,CAEA,8DACC,YAAA,CACA,6BAAA,CACA,UAAA,CACA,eAAA,CAEA,qEACC,wBAAA,CAEA,iFACC,qBAAA",sourcesContent:["\n.sharingTabDetailsView {\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 100%;\n\tmargin: 0 auto;\n\tposition: relative;\n\theight: 100%;\n\toverflow: hidden;\n\n\t&__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbox-sizing: border-box;\n\t\tmargin: 0.2em;\n\n\t\tspan {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\n\t\t\th1 {\n\t\t\t\tfont-size: 15px;\n\t\t\t\tpadding-inline-start: 0.3em;\n\t\t\t}\n\n\t\t}\n\t}\n\n\t&__wrapper {\n\t\tposition: relative;\n\t\toverflow: scroll;\n\t\tflex-shrink: 1;\n\t\tpadding: 4px;\n\t\tpadding-inline-end: 12px;\n\t}\n\n\t&__quick-permissions {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\tmargin: 0 auto;\n\t\tborder-radius: 0;\n\n\t\tdiv {\n\t\t\twidth: 100%;\n\n\t\t\tspan {\n\t\t\t\twidth: 100%;\n\n\t\t\t\tspan:nth-child(1) {\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tpadding: 0.1em;\n\t\t\t\t}\n\n\t\t\t\t:deep(label span) {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t}\n\n\t\t\t\t/* Target component based style in NcCheckboxRadioSwitch slot content*/\n\t\t\t\t:deep(span.checkbox-content__text.checkbox-radio-switch__text) {\n\t\t\t\t\tflex-wrap: wrap;\n\n\t\t\t\t\t.subline {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\tflex-basis: 100%;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\t&__advanced-control {\n\t\twidth: 100%;\n\n\t\tbutton {\n\t\t\tmargin-top: 0.5em;\n\t\t}\n\n\t}\n\n\t&__advanced {\n\t\twidth: 100%;\n\t\tmargin-bottom: 0.5em;\n\t\ttext-align: start;\n\t\tpadding-inline-start: 0;\n\n\t\tsection {\n\n\t\t\ttextarea,\n\t\t\tdiv.mx-datepicker {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n\t\t\ttextarea {\n\t\t\t\theight: 80px;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\n\t\t\t/*\n\t\t\t  The following style is applied out of the component's scope\n\t\t\t  to remove padding from the label.checkbox-radio-switch__label,\n\t\t\t  which is used to group radio checkbox items. The use of ::v-deep\n\t\t\t  ensures that the padding is modified without being affected by\n\t\t\t  the component's scoping.\n\t\t\t  Without this achieving left alignment for the checkboxes would not\n\t\t\t  be possible.\n\t\t\t*/\n\t\t\tspan :deep(label) {\n\t\t\t\tpadding-inline-start: 0 !important;\n\t\t\t\tbackground-color: initial !important;\n\t\t\t\tborder: none !important;\n\t\t\t}\n\n\t\t\tsection.custom-permissions-group {\n\t\t\t\tpadding-inline-start: 1.5em;\n\t\t\t}\n\t\t}\n\t}\n\n\t&__label {\n\t\tpadding-block-end: 6px;\n\t}\n\n\t&__delete {\n\t\t> button:first-child {\n\t\t\tcolor: rgb(223, 7, 7);\n\t\t}\n\t}\n\n\t&__footer {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tposition: sticky;\n\t\tbottom: 0;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tbackground: linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background));\n\n\t\t.button-group {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\twidth: 100%;\n\t\t\tmargin-top: 16px;\n\n\t\t\tbutton {\n\t\t\t\tmargin-inline-start: 16px;\n\n\t\t\t\t&:first-child {\n\t\t\t\t\tmargin-inline-start: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const o=r},78712:(e,i,s)=>{"use strict";s.r(i),s.d(i,{default:()=>pi});var a=s(21777),n=s(87485),r=s(35810),o=s(81222),l=s(63814),c=s(40715),h=s(41944),d=s(74095),u=s(98261),p=s(77939),f=s(41423),A=s(65043),g=s(51651);class m{constructor(){(function(e,t,i){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})(this,"_capabilities",void 0),this._capabilities=(0,n.F)()}get defaultPermissions(){return this._capabilities.files_sharing?.default_permissions}get isPublicUploadEnabled(){return!0===this._capabilities.files_sharing?.public?.upload}get federatedShareDocLink(){return window.OC.appConfig.core.federatedCloudShareDoc}get defaultExpirationDate(){return this.isDefaultExpireDateEnabled&&null!==this.defaultExpireDate?new Date((new Date).setDate((new Date).getDate()+this.defaultExpireDate)):null}get defaultInternalExpirationDate(){return this.isDefaultInternalExpireDateEnabled&&null!==this.defaultInternalExpireDate?new Date((new Date).setDate((new Date).getDate()+this.defaultInternalExpireDate)):null}get defaultRemoteExpirationDateString(){return this.isDefaultRemoteExpireDateEnabled&&null!==this.defaultRemoteExpireDate?new Date((new Date).setDate((new Date).getDate()+this.defaultRemoteExpireDate)):null}get enforcePasswordForPublicLink(){return!0===window.OC.appConfig.core.enforcePasswordForPublicLink}get enableLinkPasswordByDefault(){return!0===window.OC.appConfig.core.enableLinkPasswordByDefault}get isDefaultExpireDateEnforced(){return!0===window.OC.appConfig.core.defaultExpireDateEnforced}get isDefaultExpireDateEnabled(){return!0===window.OC.appConfig.core.defaultExpireDateEnabled}get isDefaultInternalExpireDateEnforced(){return!0===window.OC.appConfig.core.defaultInternalExpireDateEnforced}get isDefaultInternalExpireDateEnabled(){return!0===window.OC.appConfig.core.defaultInternalExpireDateEnabled}get isDefaultRemoteExpireDateEnforced(){return!0===window.OC.appConfig.core.defaultRemoteExpireDateEnforced}get isDefaultRemoteExpireDateEnabled(){return!0===window.OC.appConfig.core.defaultRemoteExpireDateEnabled}get isRemoteShareAllowed(){return!0===window.OC.appConfig.core.remoteShareAllowed}get isFederationEnabled(){return!0===this._capabilities?.files_sharing?.federation?.outgoing}get isPublicShareAllowed(){return!0===this._capabilities?.files_sharing?.public?.enabled}get isMailShareAllowed(){return!0===this._capabilities?.files_sharing?.sharebymail?.enabled&&!0===this.isPublicShareAllowed}get defaultExpireDate(){return window.OC.appConfig.core.defaultExpireDate}get defaultInternalExpireDate(){return window.OC.appConfig.core.defaultInternalExpireDate}get defaultRemoteExpireDate(){return window.OC.appConfig.core.defaultRemoteExpireDate}get isResharingAllowed(){return!0===window.OC.appConfig.core.resharingAllowed}get isPasswordForMailSharesRequired(){return!0===this._capabilities.files_sharing?.sharebymail?.password?.enforced}get shouldAlwaysShowUnique(){return!0===this._capabilities.files_sharing?.sharee?.always_show_unique}get allowGroupSharing(){return!0===window.OC.appConfig.core.allowGroupSharing}get maxAutocompleteResults(){return parseInt(window.OC.config["sharing.maxAutocompleteResults"],10)||25}get minSearchStringLength(){return parseInt(window.OC.config["sharing.minSearchStringLength"],10)||0}get passwordPolicy(){return this._capabilities?.password_policy||{}}get allowCustomTokens(){return this._capabilities?.files_sharing?.public?.custom_tokens}get showFederatedSharesAsInternal(){return(0,o.C)("files_sharing","showFederatedSharesAsInternal",!1)}get showFederatedSharesToTrustedServersAsInternal(){return(0,o.C)("files_sharing","showFederatedSharesToTrustedServersAsInternal",!1)}}var _=s(62746);class C{constructor(e){if(function(e,t,i){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"_share",void 0),e.ocs&&e.ocs.data&&e.ocs.data[0]&&(e=e.ocs.data[0]),"string"==typeof e.id&&(e.id=Number.parseInt(e.id)),e.hide_download=!!e.hide_download,e.mail_send=!!e.mail_send,e.attributes&&"string"==typeof e.attributes)try{e.attributes=JSON.parse(e.attributes)}catch(t){console.warn("Could not parse share attributes returned by server",e.attributes)}e.attributes=e.attributes??[],this._share=e}get state(){return this._share}get id(){return this._share.id}get type(){return this._share.share_type}get permissions(){return this._share.permissions}get attributes(){return this._share.attributes||[]}set permissions(e){this._share.permissions=e}get owner(){return this._share.uid_owner}get ownerDisplayName(){return this._share.displayname_owner}get shareWith(){return this._share.share_with}get shareWithDisplayName(){return this._share.share_with_displayname||this._share.share_with}get shareWithDisplayNameUnique(){return this._share.share_with_displayname_unique||this._share.share_with}get shareWithLink(){return this._share.share_with_link}get shareWithAvatar(){return this._share.share_with_avatar}get uidFileOwner(){return this._share.uid_file_owner}get displaynameFileOwner(){return this._share.displayname_file_owner||this._share.uid_file_owner}get createdTime(){return this._share.stime}get expireDate(){return this._share.expiration}set expireDate(e){this._share.expiration=e}get token(){return this._share.token}set token(e){this._share.token=e}get note(){return this._share.note}set note(e){this._share.note=e}get label(){return this._share.label??""}set label(e){this._share.label=e}get mailSend(){return!0===this._share.mail_send}get hideDownload(){return!0===this._share.hide_download||void 0!==this.attributes.find?.(e=>{let{scope:t,key:i,value:s}=e;return"permissions"===t&&"download"===i&&!s})}set hideDownload(e){if(!e){const e=this.attributes.find(e=>{let{key:t,scope:i}=e;return"download"===t&&"permissions"===i});e&&(e.value=!0)}this._share.hide_download=!0===e}get password(){return this._share.password}set password(e){this._share.password=e}get passwordExpirationTime(){return this._share.password_expiration_time}set passwordExpirationTime(e){this._share.password_expiration_time=e}get sendPasswordByTalk(){return this._share.send_password_by_talk}set sendPasswordByTalk(e){this._share.send_password_by_talk=e}get path(){return this._share.path}get itemType(){return this._share.item_type}get mimetype(){return this._share.mimetype}get fileSource(){return this._share.file_source}get fileTarget(){return this._share.file_target}get fileParent(){return this._share.file_parent}get hasReadPermission(){return!!(this.permissions&window.OC.PERMISSION_READ)}get hasCreatePermission(){return!!(this.permissions&window.OC.PERMISSION_CREATE)}get hasDeletePermission(){return!!(this.permissions&window.OC.PERMISSION_DELETE)}get hasUpdatePermission(){return!!(this.permissions&window.OC.PERMISSION_UPDATE)}get hasSharePermission(){return!!(this.permissions&window.OC.PERMISSION_SHARE)}get hasDownloadPermission(){return this.attributes.some(e=>"permissions"===e.scope&&"download"===e.key&&!1===e.value)}get isFileRequest(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[]";const t=e=>"fileRequest"===e.scope&&"enabled"===e.key&&!0===e.value;try{return JSON.parse(e).some(t)}catch(e){return _.A.error("Error while parsing share attributes",{error:e}),!1}}(JSON.stringify(this.attributes))}set hasDownloadPermission(e){this.setAttribute("permissions","download",!!e)}setAttribute(e,t,i){const s={scope:e,key:t,value:i};for(const e in this._share.attributes){const t=this._share.attributes[e];if(t.scope===s.scope&&t.key===s.key)return void this._share.attributes.splice(e,1,s)}this._share.attributes.push(s)}get canEdit(){return!0===this._share.can_edit}get canDelete(){return!0===this._share.can_delete}get viaFileid(){return this._share.via_fileid}get viaPath(){return this._share.via_path}get parent(){return this._share.parent}get storageId(){return this._share.storage_id}get storage(){return this._share.storage}get itemSource(){return this._share.item_source}get status(){return this._share.status}get isTrustedServer(){return!!this._share.is_trusted_server}}var y=s(85168),w=s(57505),v=s(54373),E=s(31773),b=s(24764);const S={name:"SharingEntrySimple",components:{NcActions:b.A},props:{title:{type:String,default:"",required:!0},subtitle:{type:String,default:""},isUnique:{type:Boolean,default:!0},ariaExpanded:{type:Boolean,default:null}},computed:{ariaExpandedValue(){return null===this.ariaExpanded?this.ariaExpanded:this.ariaExpanded?"true":"false"}}};var x=s(85072),T=s.n(x),I=s(97825),D=s.n(I),k=s(77659),N=s.n(k),P=s(55056),L=s.n(P),R=s(10540),O=s.n(R),F=s(41113),V=s.n(F),B=s(43570),M={};M.styleTagTransform=V(),M.setAttributes=L(),M.insert=N().bind(null,"head"),M.domAPI=D(),M.insertStyleElement=O(),T()(B.A,M),B.A&&B.A.locals&&B.A.locals;var $=s(14486);const U=(0,$.A)(S,function(){var e=this,t=e._self._c;return t("li",{staticClass:"sharing-entry"},[e._t("avatar"),e._v(" "),t("div",{staticClass:"sharing-entry__desc"},[t("span",{staticClass:"sharing-entry__title"},[e._v(e._s(e.title))]),e._v(" "),e.subtitle?t("p",[e._v("\n\t\t\t"+e._s(e.subtitle)+"\n\t\t")]):e._e()]),e._v(" "),e.$slots.default?t("NcActions",{ref:"actionsComponent",staticClass:"sharing-entry__actions",attrs:{"menu-align":"right","aria-expanded":e.ariaExpandedValue}},[e._t("default")],2):e._e()],2)},[],!1,null,"44339fa4",null).exports,H={name:"SharingEntryInternal",components:{NcActionButton:w.A,SharingEntrySimple:U,CheckIcon:v.A,ClipboardIcon:E.A},props:{fileInfo:{type:Object,default:()=>{},required:!0}},data:()=>({copied:!1,copySuccess:!1}),computed:{internalLink(){return window.location.protocol+"//"+window.location.host+(0,l.Jv)("/f/")+this.fileInfo.id},copyLinkTooltip(){return this.copied?this.copySuccess?"":t("files_sharing","Cannot copy, please copy the link manually"):t("files_sharing","Copy internal link")},internalLinkSubtitle:()=>t("files_sharing","For people who already have access")},methods:{async copyLink(){try{await navigator.clipboard.writeText(this.internalLink),(0,y.Te)(t("files_sharing","Link copied")),this.$refs.shareEntrySimple.$refs.actionsComponent.$el.focus(),this.copySuccess=!0,this.copied=!0}catch(e){this.copySuccess=!1,this.copied=!0,console.error(e)}finally{setTimeout(()=>{this.copySuccess=!1,this.copied=!1},4e3)}}}};var G=s(12583),q={};q.styleTagTransform=V(),q.setAttributes=L(),q.insert=N().bind(null,"head"),q.domAPI=D(),q.insertStyleElement=O(),T()(G.A,q),G.A&&G.A.locals&&G.A.locals;const W=(0,$.A)(H,function(){var e=this,t=e._self._c;return t("ul",[t("SharingEntrySimple",{ref:"shareEntrySimple",staticClass:"sharing-entry__internal",attrs:{title:e.t("files_sharing","Internal link"),subtitle:e.internalLinkSubtitle},scopedSlots:e._u([{key:"avatar",fn:function(){return[t("div",{staticClass:"avatar-external icon-external-white"})]},proxy:!0}])},[e._v(" "),t("NcActionButton",{attrs:{title:e.copyLinkTooltip,"aria-label":e.copyLinkTooltip},on:{click:e.copyLink},scopedSlots:e._u([{key:"icon",fn:function(){return[e.copied&&e.copySuccess?t("CheckIcon",{staticClass:"icon-checkmark-color",attrs:{size:20}}):t("ClipboardIcon",{attrs:{size:20}})]},proxy:!0}])})],1)],1)},[],!1,null,"d46d5c9a",null).exports;var j=s(17334),z=s.n(j),Y=s(67607),X=(s(48318),s(61338));const Q=(0,l.KT)("apps/files_sharing/api/v1/shares"),Z={methods:{async createShare(e){let{path:i,permissions:s,shareType:a,shareWith:n,publicUpload:r,password:o,sendPasswordByTalk:l,expireDate:c,label:h,note:d,attributes:u}=e;try{const e=await A.Ay.post(Q,{path:i,permissions:s,shareType:a,shareWith:n,publicUpload:r,password:o,sendPasswordByTalk:l,expireDate:c,label:h,note:d,attributes:u});if(!e?.data?.ocs)throw e;const t=new C(e.data.ocs.data);return(0,X.Ic)("files_sharing:share:created",{share:t}),t}catch(e){console.error("Error while creating share",e);const i=e?.response?.data?.ocs?.meta?.message;throw(0,y.Qg)(i?t("files_sharing","Error creating the share: {errorMessage}",{errorMessage:i}):t("files_sharing","Error creating the share"),{type:"error"}),e}},async deleteShare(e){try{const t=await A.Ay.delete(Q+`/${e}`);if(!t?.data?.ocs)throw t;return(0,X.Ic)("files_sharing:share:deleted",{id:e}),!0}catch(e){console.error("Error while deleting share",e);const i=e?.response?.data?.ocs?.meta?.message;throw OC.Notification.showTemporary(i?t("files_sharing","Error deleting the share: {errorMessage}",{errorMessage:i}):t("files_sharing","Error deleting the share"),{type:"error"}),e}},async updateShare(e,i){try{const t=await A.Ay.put(Q+`/${e}`,i);if((0,X.Ic)("files_sharing:share:updated",{id:e}),t?.data?.ocs)return t.data.ocs.data;throw t}catch(e){if(console.error("Error while updating share",e),400!==e.response.status){const i=e?.response?.data?.ocs?.meta?.message;OC.Notification.showTemporary(i?t("files_sharing","Error updating the share: {errorMessage}",{errorMessage:i}):t("files_sharing","Error updating the share"),{type:"error"})}const i=e.response.data.ocs.meta.message;throw new Error(i)}}}},K=1,J=2,ee=4,te=8,ie=16,se={READ_ONLY:K,UPLOAD_AND_UPDATE:12|(K|J),FILE_DROP:4,ALL:4|J|K|8|ie,ALL_FILE:J|K|ie};const ae={methods:{async openSharingDetails(e){let t={};if(e.handler){const i={};this.suggestions&&(i.suggestions=this.suggestions,i.fileInfo=this.fileInfo,i.query=this.query);const s=await e.handler(i);t=this.mapShareRequestToShareObject(s)}else t=this.mapShareRequestToShareObject(e);if("dir"!==this.fileInfo.type){const e=t.permissions,i=-5&e&-9;e!==i&&(_.A.debug("Removed create/delete permissions from file share (only valid for folders)"),t.permissions=i)}const i={fileInfo:this.fileInfo,share:t};this.$emit("open-sharing-details",i)},openShareDetailsForCustomSettings(e){e.setCustomPermissions=!0,this.openSharingDetails(e)},mapShareRequestToShareObject(e){if(e.id)return e;const t={attributes:[{value:!0,key:"download",scope:"permissions"}],hideDownload:!1,share_type:e.shareType,share_with:e.shareWith,is_no_user:e.isNoUser,user:e.shareWith,share_with_displayname:e.displayName,subtitle:e.subtitle,permissions:e.permissions??(new m).defaultPermissions,expiration:""};return new C(t)}}},ne={name:"SharingInput",components:{NcSelect:Y.default},mixins:[Z,ae],props:{shares:{type:Array,default:()=>[],required:!0},linkShares:{type:Array,default:()=>[],required:!0},fileInfo:{type:Object,default:()=>{},required:!0},reshare:{type:C,default:null},canReshare:{type:Boolean,required:!0},isExternal:{type:Boolean,default:!1},placeholder:{type:String,default:""}},setup:()=>({shareInputId:`share-input-${Math.random().toString(36).slice(2,7)}`}),data:()=>({config:new m,loading:!1,query:"",recommendations:[],ShareSearch:OCA.Sharing.ShareSearch.state,suggestions:[],value:null}),computed:{externalResults(){return this.ShareSearch.results},inputPlaceholder(){const e=this.config.isRemoteShareAllowed;return this.canReshare?this.placeholder?this.placeholder:e?t("files_sharing","Name, email, or Federated Cloud ID "):t("files_sharing","Name or email "):t("files_sharing","Resharing is not allowed")},isValidQuery(){return this.query&&""!==this.query.trim()&&this.query.length>this.config.minSearchStringLength},options(){return this.isValidQuery?this.suggestions:this.recommendations},noResultText(){return this.loading?t("files_sharing","Searching "):t("files_sharing","No elements found.")}},mounted(){this.isExternal||this.getRecommendations()},methods:{onSelected(e){this.value=null,this.openSharingDetails(e)},async asyncFind(e){this.query=e.trim(),this.isValidQuery&&(this.loading=!0,await this.debounceGetSuggestions(e))},async getSuggestions(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading=!0,!0===(0,n.F)().files_sharing.sharee.query_lookup_default&&(i=!0);const s=[c.I.Remote,c.I.RemoteGroup],a=[],r=this.config.showFederatedSharesAsInternal||this.config.showFederatedSharesToTrustedServersAsInternal,o=!this.isExternal&&r||this.isExternal&&!r||this.isExternal&&this.config.showFederatedSharesToTrustedServersAsInternal;this.isExternal?!0===(0,n.F)().files_sharing.public.enabled&&a.push(c.I.Email):a.push(c.I.User,c.I.Group,c.I.Team,c.I.Room,c.I.Guest,c.I.Deck,c.I.ScienceMesh),o&&a.push(...s);let h=null;try{h=await A.Ay.get((0,l.KT)("apps/files_sharing/api/v1/sharees"),{params:{format:"json",itemType:"dir"===this.fileInfo.type?"folder":"file",search:e,lookup:i,perPage:this.config.maxAutocompleteResults,shareType:a}})}catch(e){return void console.error("Error fetching suggestions",e)}const{exact:d,...u}=h.data.ocs.data,p=Object.values(d).flat(),f=Object.values(u).flat(),g=this.filterOutExistingShares(p).map(e=>this.formatForMultiselect(e)).sort((e,t)=>e.shareType-t.shareType),m=this.filterOutExistingShares(f).map(e=>this.formatForMultiselect(e)).sort((e,t)=>e.shareType-t.shareType),_=[];u.lookupEnabled&&!i&&_.push({id:"global-lookup",isNoUser:!0,displayName:t("files_sharing","Search everywhere"),lookup:!0});const C=this.externalResults.filter(e=>!e.condition||e.condition(this)),y=g.concat(m).concat(C).concat(_),w=y.reduce((e,t)=>t.displayName?(e[t.displayName]||(e[t.displayName]=0),e[t.displayName]++,e):e,{});this.suggestions=y.map(e=>w[e.displayName]>1&&!e.desc?{...e,desc:e.shareWithDisplayNameUnique}:e),this.loading=!1,console.info("suggestions",this.suggestions)},debounceGetSuggestions:z()(function(){this.getSuggestions(...arguments)},300),async getRecommendations(){this.loading=!0;let e=null;try{e=await A.Ay.get((0,l.KT)("apps/files_sharing/api/v1/sharees_recommended"),{params:{format:"json",itemType:this.fileInfo.type}})}catch(e){return void console.error("Error fetching recommendations",e)}const t=this.externalResults.filter(e=>!e.condition||e.condition(this)),i=Object.values(e.data.ocs.data.exact).reduce((e,t)=>e.concat(t),[]);this.recommendations=this.filterOutExistingShares(i).map(e=>this.formatForMultiselect(e)).concat(t),this.loading=!1,console.info("recommendations",this.recommendations)},filterOutExistingShares(e){return e.reduce((e,t)=>{if("object"!=typeof t)return e;try{if(t.value.shareType===c.I.User){if(t.value.shareWith===(0,a.HW)().uid)return e;if(this.reshare&&t.value.shareWith===this.reshare.owner)return e}if(t.value.shareType===c.I.Email){if(!this.isExternal)return e;if(-1!==this.linkShares.map(e=>e.shareWith).indexOf(t.value.shareWith.trim()))return e}else{const i=this.shares.reduce((e,t)=>(e[t.shareWith]=t.type,e),{}),s=t.value.shareWith.trim();if(s in i&&i[s]===t.value.shareType)return e}e.push(t)}catch{return e}return e},[])},shareTypeToIcon(e){switch(e){case c.I.Guest:return{icon:"icon-user",iconTitle:t("files_sharing","Guest")};case c.I.RemoteGroup:case c.I.Group:return{icon:"icon-group",iconTitle:t("files_sharing","Group")};case c.I.Email:return{icon:"icon-mail",iconTitle:t("files_sharing","Email")};case c.I.Team:return{icon:"icon-teams",iconTitle:t("files_sharing","Team")};case c.I.Room:return{icon:"icon-room",iconTitle:t("files_sharing","Talk conversation")};case c.I.Deck:return{icon:"icon-deck",iconTitle:t("files_sharing","Deck board")};case c.I.Sciencemesh:return{icon:"icon-sciencemesh",iconTitle:t("files_sharing","ScienceMesh")};default:return{}}},formatForMultiselect(e){let i,s=e.name||e.label;return e.value.shareType===c.I.User&&this.config.shouldAlwaysShowUnique?i=e.shareWithDisplayNameUnique??"":e.value.shareType===c.I.Email?i=e.value.shareWith:e.value.shareType===c.I.Remote||e.value.shareType===c.I.RemoteGroup?this.config.showFederatedSharesAsInternal?(i=e.extra?.email?.value??"",s=e.extra?.name?.value??s):e.value.server&&(i=t("files_sharing","on {server}",{server:e.value.server})):i=e.shareWithDescription??"",{shareWith:e.value.shareWith,shareType:e.value.shareType,user:e.uuid||e.value.shareWith,isNoUser:e.value.shareType!==c.I.User,displayName:s,subname:i,shareWithDisplayNameUnique:e.shareWithDisplayNameUnique||"",...this.shareTypeToIcon(e.value.shareType)}}}};var re=s(22064),oe={};oe.styleTagTransform=V(),oe.setAttributes=L(),oe.insert=N().bind(null,"head"),oe.domAPI=D(),oe.insertStyleElement=O(),T()(re.A,oe),re.A&&re.A.locals&&re.A.locals;const le=(0,$.A)(ne,function(){var e=this,t=e._self._c;return t("div",{staticClass:"sharing-search"},[t("label",{staticClass:"hidden-visually",attrs:{for:e.shareInputId}},[e._v("\n\t\t"+e._s(e.isExternal?e.t("files_sharing","Enter external recipients"):e.t("files_sharing","Search for internal recipients"))+"\n\t")]),e._v(" "),t("NcSelect",{ref:"select",staticClass:"sharing-search__input",attrs:{"input-id":e.shareInputId,disabled:!e.canReshare,loading:e.loading,filterable:!1,placeholder:e.inputPlaceholder,"clear-search-on-blur":()=>!1,"user-select":!0,options:e.options,"label-outside":!0},on:{search:e.asyncFind,"option:selected":e.onSelected},scopedSlots:e._u([{key:"no-options",fn:function(t){let{search:i}=t;return[e._v("\n\t\t\t"+e._s(i?e.noResultText:e.placeholder)+"\n\t\t")]}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},[],!1,null,null,null).exports;var ce=s(71225),he=s(39999),de=s(49615),ue=s(49264),pe=s(53334);const fe=new m;async function Ae(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(fe.passwordPolicy.api&&fe.passwordPolicy.api.generate)try{const t=await A.Ay.get(fe.passwordPolicy.api.generate);if(t.data.ocs.data.password)return e&&(0,y.Te)((0,pe.Tl)("files_sharing","Password created successfully")),t.data.ocs.data.password}catch(t){console.info("Error generating password from password_policy",t),e&&(0,y.Qg)((0,pe.Tl)("files_sharing","Error generating password from password policy"))}const t=new Uint8Array(10),i=52/255;!function(e){if(self?.crypto?.getRandomValues)return void self.crypto.getRandomValues(e);let t=e.length;for(;t--;)e[t]=Math.floor(256*Math.random())}(t);let s="";for(let e=0;e<t.length;e++)s+="abcdefgijkmnopqrstwxyzABCDEFGHJKLMNPQRSTWXYZ23456789".charAt(t[e]*i);return s}var ge=s(1822);const me=(0,ge.c)(),_e={mixins:[Z],props:{fileInfo:{type:Object,default:()=>{},required:!0},share:{type:C,default:null},isUnique:{type:Boolean,default:!0}},data(){return{config:new m,node:null,ShareType:c.I,errors:{},loading:!1,saving:!1,open:!1,passwordProtectedState:void 0,updateQueue:new ue.A({concurrency:1}),reactiveState:this.share?.state}},computed:{path(){return(this.fileInfo.path+"/"+this.fileInfo.name).replace("//","/")},hasNote:{get(){return""!==this.share.note},set(e){this.share.note=e?null:""}},dateTomorrow:()=>new Date((new Date).setDate((new Date).getDate()+1)),lang(){const e=window.dayNamesShort?window.dayNamesShort:["Sun.","Mon.","Tue.","Wed.","Thu.","Fri.","Sat."],t=window.monthNamesShort?window.monthNamesShort:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."];return{formatLocale:{firstDayOfWeek:window.firstDay?window.firstDay:0,monthsShort:t,weekdaysMin:e,weekdaysShort:e},monthFormat:"MMM"}},isNewShare(){return!this.share.id},isFolder(){return"dir"===this.fileInfo.type},isPublicShare(){const e=this.share.shareType??this.share.type;return[c.I.Link,c.I.Email].includes(e)},isRemoteShare(){return this.share.type===c.I.RemoteGroup||this.share.type===c.I.Remote},isShareOwner(){return this.share&&this.share.owner===(0,a.HW)().uid},isExpiryDateEnforced(){return this.isPublicShare?this.config.isDefaultExpireDateEnforced:this.isRemoteShare?this.config.isDefaultRemoteExpireDateEnforced:this.config.isDefaultInternalExpireDateEnforced},hasCustomPermissions(){return![se.ALL,se.READ_ONLY,se.FILE_DROP].includes(this.share.permissions)},maxExpirationDateEnforced(){return this.isExpiryDateEnforced?this.isPublicShare?this.config.defaultExpirationDate:this.isRemoteShare?this.config.defaultRemoteExpirationDateString:this.config.defaultInternalExpirationDate:null},isPasswordProtected:{get(){return!!this.config.enforcePasswordForPublicLink||(void 0!==this.passwordProtectedState?this.passwordProtectedState:void 0!==this.share.newPassword||void 0!==this.share.password)},async set(e){e?(this.passwordProtectedState=!0,this.$set(this.share,"newPassword",await Ae(!0))):(this.passwordProtectedState=!1,this.$delete(this.share,"newPassword"))}}},methods:{async getNode(){const e={path:this.path};try{this.node=await(async e=>{const t=(0,ge.l)(),i=await me.stat(`${(0,ge.g)()}${e}`,{details:!0,data:t});return(0,ge.r)(i.data)})(e.path),_.A.info("Fetched node:",{node:this.node})}catch(e){_.A.error("Error:",e)}},checkShare:e=>(!e.password||"string"==typeof e.password&&""!==e.password.trim())&&((!e.newPassword||"string"==typeof e.newPassword)&&!(e.expirationDate&&!e.expirationDate.isValid())),formatDateToString:e=>new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())).toISOString().split("T")[0],onExpirationChange(e){if(!e)return this.share.expireDate=null,void this.$set(this.share,"expireDate",null);const t=e instanceof Date?e:new Date(e);this.share.expireDate=this.formatDateToString(t)},onNoteChange(e){this.$set(this.share,"newNote",e.trim())},onNoteSubmit(){this.share.newNote&&(this.share.note=this.share.newNote,this.$delete(this.share,"newNote"),this.queueUpdate("note"))},async onDelete(){try{this.loading=!0,this.open=!1,await this.deleteShare(this.share.id),_.A.debug("Share deleted",{shareId:this.share.id});const e="file"===this.share.itemType?t("files_sharing",'File "{path}" has been unshared',{path:this.share.path}):t("files_sharing",'Folder "{path}" has been unshared',{path:this.share.path});(0,y.Te)(e),this.$emit("remove:share",this.share),await this.getNode(),(0,X.Ic)("files:node:updated",this.node)}catch(e){this.open=!0}finally{this.loading=!1}},queueUpdate(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];if(0!==i.length){if(this.share.id){const e={};for(const t of i)"password"!==t?null===this.share[t]||void 0===this.share[t]?e[t]="":"object"==typeof this.share[t]?e[t]=JSON.stringify(this.share[t]):e[t]=this.share[t].toString():e[t]=this.share.newPassword??this.share.password;return this.updateQueue.add(async()=>{this.saving=!0,this.errors={};try{const t=await this.updateShare(this.share.id,e);i.includes("password")&&(this.share.password=this.share.newPassword??"",this.$delete(this.share,"newPassword"),this.share.passwordExpirationTime=t.password_expiration_time);for(const e of i)this.$delete(this.errors,e);(0,y.Te)(this.updateSuccessMessage(i))}catch(e){_.A.error("Could not update share",{error:e,share:this.share,propertyNames:i});const{message:s}=e;if(s&&""!==s){for(const e of i)this.onSyncError(e,s);(0,y.Qg)(s)}else(0,y.Qg)(t("files_sharing","Could not update share"))}finally{this.saving=!1}})}console.debug("Updated local share",this.share)}},updateSuccessMessage(e){if(1!==e.length)return t("files_sharing","Share saved");switch(e[0]){case"expireDate":return t("files_sharing","Share expiry date saved");case"hideDownload":return t("files_sharing","Share hide-download state saved");case"label":return t("files_sharing","Share label saved");case"note":return t("files_sharing","Share note for recipient saved");case"password":return t("files_sharing","Share password saved");case"permissions":return t("files_sharing","Share permissions saved");default:return t("files_sharing","Share saved")}},onSyncError(e,t){switch("password"===e&&void 0!==this.share.newPassword&&(this.share.newPassword===this.share.password&&(this.share.password=""),this.$delete(this.share,"newPassword")),this.open=!0,e){case"password":case"pending":case"expireDate":case"label":case"note":{this.$set(this.errors,e,t);let i=this.$refs[e];if(i){i.$el&&(i=i.$el);const e=i.querySelector(".focusable");e&&e.focus()}break}case"sendPasswordByTalk":this.$set(this.errors,e,t),this.share.sendPasswordByTalk=!this.share.sendPasswordByTalk}},debounceQueueUpdate:z()(function(e){this.queueUpdate(e)},500)}},Ce={name:"SharingEntryInherited",components:{NcActionButton:w.A,NcActionLink:he.A,NcActionText:de.A,NcAvatar:h.A,SharingEntrySimple:U},mixins:[_e],props:{share:{type:C,required:!0}},computed:{viaFileTargetUrl(){return(0,l.Jv)("/f/{fileid}",{fileid:this.share.viaFileid})},viaFolderName(){return(0,ce.P8)(this.share.viaPath)}}};var ye=s(59879),we={};we.styleTagTransform=V(),we.setAttributes=L(),we.insert=N().bind(null,"head"),we.domAPI=D(),we.insertStyleElement=O(),T()(ye.A,we),ye.A&&ye.A.locals&&ye.A.locals;const ve=(0,$.A)(Ce,function(){var e=this,t=e._self._c;return t("SharingEntrySimple",{key:e.share.id,staticClass:"sharing-entry__inherited",attrs:{title:e.share.shareWithDisplayName},scopedSlots:e._u([{key:"avatar",fn:function(){return[t("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{user:e.share.shareWith,"display-name":e.share.shareWithDisplayName}})]},proxy:!0}])},[e._v(" "),t("NcActionText",{attrs:{icon:"icon-user"}},[e._v("\n\t\t"+e._s(e.t("files_sharing","Added by {initiator}",{initiator:e.share.ownerDisplayName}))+"\n\t")]),e._v(" "),e.share.viaPath&&e.share.viaFileid?t("NcActionLink",{attrs:{icon:"icon-folder",href:e.viaFileTargetUrl}},[e._v("\n\t\t"+e._s(e.t("files_sharing","Via {folder}",{folder:e.viaFolderName}))+"\n\t")]):e._e(),e._v(" "),e.share.canDelete?t("NcActionButton",{attrs:{icon:"icon-close"},on:{click:function(t){return t.preventDefault(),e.onDelete.apply(null,arguments)}}},[e._v("\n\t\t"+e._s(e.t("files_sharing","Unshare"))+"\n\t")]):e._e()],1)},[],!1,null,"fe8ed59e",null).exports,Ee={name:"SharingInherited",components:{NcActionButton:w.A,SharingEntryInherited:ve,SharingEntrySimple:U},props:{fileInfo:{type:Object,default:()=>{},required:!0}},data:()=>({loaded:!1,loading:!1,showInheritedShares:!1,shares:[]}),computed:{showInheritedSharesIcon(){return this.loading?"icon-loading-small":this.showInheritedShares?"icon-triangle-n":"icon-triangle-s"},mainTitle:()=>t("files_sharing","Others with access"),subTitle(){return this.showInheritedShares&&0===this.shares.length?t("files_sharing","No other accounts with access found"):""},toggleTooltip(){return"dir"===this.fileInfo.type?t("files_sharing","Toggle list of others with access to this directory"):t("files_sharing","Toggle list of others with access to this file")},fullPath(){return`${this.fileInfo.path}/${this.fileInfo.name}`.replace("//","/")}},watch:{fileInfo(){this.resetState()}},methods:{toggleInheritedShares(){this.showInheritedShares=!this.showInheritedShares,this.showInheritedShares?this.fetchInheritedShares():this.resetState()},async fetchInheritedShares(){this.loading=!0;try{const e=(0,l.KT)("apps/files_sharing/api/v1/shares/inherited?format=json&path={path}",{path:this.fullPath}),t=await A.Ay.get(e);this.shares=t.data.ocs.data.map(e=>new C(e)).sort((e,t)=>t.createdTime-e.createdTime),console.info(this.shares),this.loaded=!0}catch(e){OC.Notification.showTemporary(t("files_sharing","Unable to fetch inherited shares"),{type:"error"})}finally{this.loading=!1}},resetState(){this.loaded=!1,this.loading=!1,this.showInheritedShares=!1,this.shares=[]},removeShare(e){const t=this.shares.findIndex(t=>t===e);this.shares.splice(t,1)}}};var be=s(30255),Se={};Se.styleTagTransform=V(),Se.setAttributes=L(),Se.insert=N().bind(null,"head"),Se.domAPI=D(),Se.insertStyleElement=O(),T()(be.A,Se),be.A&&be.A.locals&&be.A.locals;const xe=(0,$.A)(Ee,function(){var e=this,t=e._self._c;return t("ul",{attrs:{id:"sharing-inherited-shares"}},[t("SharingEntrySimple",{staticClass:"sharing-entry__inherited",attrs:{title:e.mainTitle,subtitle:e.subTitle,"aria-expanded":e.showInheritedShares},scopedSlots:e._u([{key:"avatar",fn:function(){return[t("div",{staticClass:"avatar-shared icon-more-white"})]},proxy:!0}])},[e._v(" "),t("NcActionButton",{attrs:{icon:e.showInheritedSharesIcon,"aria-label":e.toggleTooltip,title:e.toggleTooltip},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleInheritedShares.apply(null,arguments)}}})],1),e._v(" "),e._l(e.shares,function(i){return t("SharingEntryInherited",{key:i.id,attrs:{"file-info":e.fileInfo,share:i},on:{"remove:share":e.removeShare}})})],2)},[],!1,null,"22d51ef0",null).exports;var Te=s(9165),Ie=s(85471),De=s(17816),ke=s.n(De),Ne=s(81045),Pe=s(44131),Le=s(15502),Re=s(94219),Oe=s(6695),Fe=s(88289);const Ve={name:"TuneIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Be=(0,$.A)(Ve,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon tune-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,Me={name:"CalendarBlankOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},$e=(0,$.A)(Me,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon calendar-blank-outline-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19 3H18V1H16V3H8V1H6V3H5C3.89 3 3 3.9 3 5V19C3 20.11 3.9 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.9 20.11 3 19 3M19 19H5V9H19V19M19 7H5V5H19V7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,Ue={name:"QrcodeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},He=(0,$.A)(Ue,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon qrcode-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M3,11H5V13H3V11M11,5H13V9H11V5M9,11H13V15H11V13H9V11M15,11H17V13H19V11H21V13H19V15H21V19H19V21H17V19H13V21H11V17H15V15H17V13H15V11M19,19V15H17V19H19M15,3H21V9H15V3M17,5V7H19V5H17M3,3H9V9H3V3M5,5V7H7V5H5M3,15H9V21H3V15M5,17V19H7V17H5Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,Ge={name:"ExclamationIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},qe=(0,$.A)(Ge,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon exclamation-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M 11,4L 13,4L 13,15L 11,15L 11,4 Z M 13,18L 13,20L 11,20L 11,18L 13,18 Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,We={name:"LockOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},je=(0,$.A)(We,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon lock-outline-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10C4,8.89 4.89,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,ze={name:"CheckBoldIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ye=(0,$.A)(ze,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon check-bold-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports;var Xe=s(66001),Qe=s(96078);const Ze={name:"TriangleSmallDownIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ke=(0,$.A)(Ze,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon triangle-small-down-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M8 9H16L12 16"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,Je={name:"EyeOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},et=(0,$.A)(Je,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon eye-outline-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports;var tt=s(16502),it=s(3242);const st={name:"SharingEntryQuickShareSelect",components:{DropdownIcon:Ke,NcActions:b.A,NcActionButton:w.A},mixins:[_e,ae],props:{share:{type:Object,required:!0}},emits:["open-sharing-details"],data:()=>({selectedOption:""}),computed:{ariaLabel(){return t("files_sharing",'Quick share options, the current selected is "{selectedOption}"',{selectedOption:this.selectedOption})},canViewText:()=>t("files_sharing","View only"),canEditText:()=>t("files_sharing","Can edit"),fileDropText:()=>t("files_sharing","File request"),customPermissionsText:()=>t("files_sharing","Custom permissions"),preSelectedOption(){return(-17&this.share.permissions)===se.READ_ONLY?this.canViewText:this.share.permissions===se.ALL||this.share.permissions===se.ALL_FILE?this.canEditText:(-17&this.share.permissions)===se.FILE_DROP?this.fileDropText:this.customPermissionsText},options(){const e=[{label:this.canViewText,icon:et},{label:this.canEditText,icon:tt.A}];return this.supportsFileDrop&&e.push({label:this.fileDropText,icon:it.A}),e.push({label:this.customPermissionsText,icon:Be}),e},supportsFileDrop(){if(this.isFolder&&this.config.isPublicUploadEnabled){const e=this.share.type??this.share.shareType;return[c.I.Link,c.I.Email].includes(e)}return!1},dropDownPermissionValue(){switch(this.selectedOption){case this.canEditText:return this.isFolder?se.ALL:se.ALL_FILE;case this.fileDropText:return se.FILE_DROP;case this.customPermissionsText:return"custom";case this.canViewText:default:return se.READ_ONLY}}},created(){this.selectedOption=this.preSelectedOption},mounted(){(0,X.B1)("update:share",e=>{e.id===this.share.id&&(this.share.permissions=e.permissions,this.selectedOption=this.preSelectedOption)})},unmounted(){(0,X.al)("update:share")},methods:{selectOption(e){this.selectedOption=e,e===this.customPermissionsText?this.$emit("open-sharing-details"):(this.share.permissions=this.dropDownPermissionValue,this.queueUpdate("permissions"),this.$refs.quickShareActions.$refs.menuButton.$el.focus())}}},at=st;var nt=s(50326),rt={};rt.styleTagTransform=V(),rt.setAttributes=L(),rt.insert=N().bind(null,"head"),rt.domAPI=D(),rt.insertStyleElement=O(),T()(nt.A,rt),nt.A&&nt.A.locals&&nt.A.locals;const ot=(0,$.A)(at,function(){var e=this,t=e._self._c;return t("NcActions",{ref:"quickShareActions",staticClass:"share-select",attrs:{"menu-name":e.selectedOption,"aria-label":e.ariaLabel,type:"tertiary-no-background",disabled:!e.share.canEdit,"force-name":""},scopedSlots:e._u([{key:"icon",fn:function(){return[t("DropdownIcon",{attrs:{size:15}})]},proxy:!0}])},[e._v(" "),e._l(e.options,function(i){return t("NcActionButton",{key:i.label,attrs:{type:"radio","model-value":i.label===e.selectedOption,"close-after-click":""},on:{click:function(t){return e.selectOption(i.label)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.icon,{tag:"component"})]},proxy:!0}],null,!0)},[e._v("\n\t\t"+e._s(i.label)+"\n\t")])})],2)},[],!1,null,"f7c55cbc",null).exports;var lt=s(4604);const ct={name:"ClockIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ht=(0,$.A)(ct,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon clock-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,dt={name:"ShareExpiryTime",components:{NcButton:d.A,NcPopover:p.N,NcDateTime:lt.A,ClockIcon:ht},props:{share:{type:Object,required:!0}},computed:{expiryTime(){return this.share?.expireDate?new Date(this.share.expireDate).getTime():null},timeFormat:()=>({dateStyle:"full",timeStyle:"short"})}};var ut=s(63316),pt={};pt.styleTagTransform=V(),pt.setAttributes=L(),pt.insert=N().bind(null,"head"),pt.domAPI=D(),pt.insertStyleElement=O(),T()(ut.A,pt),ut.A&&ut.A.locals&&ut.A.locals;const ft=(0,$.A)(dt,function(){var e=this,t=e._self._c;return t("div",{staticClass:"share-expiry-time"},[t("NcPopover",{attrs:{"popup-role":"dialog"},scopedSlots:e._u([{key:"trigger",fn:function(){return[e.expiryTime?t("NcButton",{staticClass:"hint-icon",attrs:{type:"tertiary","aria-label":e.t("files_sharing","Share expiration: {date}",{date:new Date(e.expiryTime).toLocaleString()})},scopedSlots:e._u([{key:"icon",fn:function(){return[t("ClockIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,3754271979)}):e._e()]},proxy:!0}])},[e._v(" "),t("h3",{staticClass:"hint-heading"},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Share Expiration"))+"\n\t\t")]),e._v(" "),e.expiryTime?t("p",{staticClass:"hint-body"},[t("NcDateTime",{attrs:{timestamp:e.expiryTime,format:e.timeFormat,"relative-time":!1}}),e._v(" ("),t("NcDateTime",{attrs:{timestamp:e.expiryTime}}),e._v(")\n\t\t")],1):e._e()])],1)},[],!1,null,"46cd2ca2",null).exports,At={name:"SidebarTabExternalActionLegacy",props:{id:{type:String,required:!0},action:{type:Object,default:()=>({})},fileInfo:{type:Object,default:()=>{},required:!0},share:{type:C,default:null}},computed:{data(){return this.action.data(this)}}},gt=(0,$.A)(At,function(){var e=this;return(0,e._self._c)(e.data.is,e._g(e._b({tag:"component"},"component",e.data,!1),e.action.handlers),[e._v("\n\t"+e._s(e.data.text)+"\n")])},[],!1,null,null,null).exports,mt={name:"SharingEntryLink",components:{NcActions:b.A,NcActionButton:w.A,NcActionCheckbox:Ne.N,NcActionInput:Pe.A,NcActionLink:he.A,NcActionText:de.A,NcActionSeparator:Le.A,NcAvatar:h.A,NcDialog:Re.A,NcIconSvgWrapper:Oe.A,NcLoadingIcon:Fe.A,VueQrcode:ke(),Tune:Be,IconCalendarBlank:$e,IconQr:He,ErrorIcon:qe,LockIcon:je,CheckIcon:Ye,CloseIcon:Xe.A,PlusIcon:Qe.A,SharingEntryQuickShareSelect:ot,ShareExpiryTime:ft,SidebarTabExternalActionLegacy:gt},mixins:[_e,ae],props:{canReshare:{type:Boolean,default:!0},index:{type:Number,default:null}},setup:()=>({mdiCheck:Te.Tfj,mdiContentCopy:Te.$BT}),data:()=>({shareCreationComplete:!1,copySuccess:!1,defaultExpirationDateEnabled:!1,pending:!1,ExternalLegacyLinkActions:OCA.Sharing.ExternalLinkActions.state,ExternalShareActions:OCA.Sharing.ExternalShareActions.state,externalShareActions:[...window._nc_files_sharing_sidebar_inline_actions?.values()??[]],showQRCode:!1}),computed:{title(){const e={escape:!1};if(this.share&&this.share.id){if(!this.isShareOwner&&this.share.ownerDisplayName)return this.isEmailShareType?(0,pe.t)("files_sharing","{shareWith} by {initiator}",{shareWith:this.share.shareWith,initiator:this.share.ownerDisplayName},e):(0,pe.t)("files_sharing","Shared via link by {initiator}",{initiator:this.share.ownerDisplayName},e);if(this.share.label&&""!==this.share.label.trim())return this.isEmailShareType?this.isFileRequest?(0,pe.t)("files_sharing","File request ({label})",{label:this.share.label.trim()},e):(0,pe.t)("files_sharing","Mail share ({label})",{label:this.share.label.trim()},e):(0,pe.t)("files_sharing","Share link ({label})",{label:this.share.label.trim()},e);if(this.isEmailShareType)return this.share.shareWith&&""!==this.share.shareWith.trim()?this.share.shareWith:this.isFileRequest?(0,pe.t)("files_sharing","File request"):(0,pe.t)("files_sharing","Mail share");if(null===this.index)return(0,pe.t)("files_sharing","Share link")}return this.index>=1?(0,pe.t)("files_sharing","Share link ({index})",{index:this.index}):(0,pe.t)("files_sharing","Create public link")},subtitle(){return this.isEmailShareType&&this.title!==this.share.shareWith?this.share.shareWith:null},passwordExpirationTime(){if(null===this.share.passwordExpirationTime)return null;const e=(0,g.A)(this.share.passwordExpirationTime);return!(e.diff((0,g.A)())<0)&&e.fromNow()},isTalkEnabled:()=>void 0!==OC.appswebroots.spreed,isPasswordProtectedByTalkAvailable(){return this.isPasswordProtected&&this.isTalkEnabled},isPasswordProtectedByTalk:{get(){return this.share.sendPasswordByTalk},async set(e){this.share.sendPasswordByTalk=e}},isEmailShareType(){return!!this.share&&this.share.type===c.I.Email},canTogglePasswordProtectedByTalkAvailable(){return!(!this.isPasswordProtected||this.isEmailShareType&&!this.hasUnsavedPassword)},pendingDataIsMissing(){return this.pendingPassword||this.pendingEnforcedPassword||this.pendingDefaultExpirationDate||this.pendingEnforcedExpirationDate},pendingPassword(){return this.config.enableLinkPasswordByDefault&&this.isPendingShare},pendingEnforcedPassword(){return this.config.enforcePasswordForPublicLink&&this.isPendingShare},pendingEnforcedExpirationDate(){return this.config.isDefaultExpireDateEnforced&&this.isPendingShare},pendingDefaultExpirationDate(){return(this.config.defaultExpirationDate instanceof Date||!isNaN(new Date(this.config.defaultExpirationDate).getTime()))&&this.isPendingShare},isPendingShare(){return!(!this.share||this.share.id)},sharePolicyHasEnforcedProperties(){return this.config.enforcePasswordForPublicLink||this.config.isDefaultExpireDateEnforced},enforcedPropertiesMissing(){if(!this.sharePolicyHasEnforcedProperties)return!1;if(!this.share)return!0;if(this.share.id)return!0;const e=this.config.enforcePasswordForPublicLink&&!this.share.newPassword,t=this.config.isDefaultExpireDateEnforced&&!this.share.expireDate;return e||t},hasUnsavedPassword(){return void 0!==this.share.newPassword},shareLink(){return(0,l.Jv)("/s/{token}",{token:this.share.token},{baseURL:(0,l.$_)()})},actionsTooltip(){return(0,pe.t)("files_sharing",'Actions for "{title}"',{title:this.title})},copyLinkLabel(){return(0,pe.t)("files_sharing",'Copy public link of "{title}"',{title:this.title})},externalLegacyLinkActions(){return this.ExternalLegacyLinkActions.actions},externalLegacyShareActions(){const e=e=>(e.shareType.includes(c.I.Link)||e.shareType.includes(c.I.Email))&&!e.advanced;return console.error("external legacy",this.ExternalShareActions,this.ExternalShareActions.actions.filter(e)),this.ExternalShareActions.actions.filter(e)},sortedExternalShareActions(){return this.externalShareActions.filter(e=>e.enabled((0,Ie.ux)(this.share),(0,Ie.ux)(this.fileInfo.node))).sort((e,t)=>e.order-t.order)},isPasswordPolicyEnabled(){return"object"==typeof this.config.passwordPolicy},canChangeHideDownload(){return this.fileInfo.shareAttributes.some(e=>"permissions"===e.scope&&"download"===e.key&&!1===e.value)},isFileRequest(){return this.share.isFileRequest}},mounted(){this.defaultExpirationDateEnabled=this.config.defaultExpirationDate instanceof Date,this.share&&this.isNewShare&&(this.share.expireDate=this.defaultExpirationDateEnabled?this.formatDateToString(this.config.defaultExpirationDate):"")},methods:{shareRequiresReview(e){return!e&&(this.defaultExpirationDateEnabled||this.config.enableLinkPasswordByDefault)},async onNewLinkShare(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_.A.debug("onNewLinkShare called (with this.share)",this.share),this.loading)return;const t={share_type:c.I.Link};if(this.config.isDefaultExpireDateEnforced&&(t.expiration=this.formatDateToString(this.config.defaultExpirationDate)),_.A.debug("Missing required properties?",this.enforcedPropertiesMissing),this.sharePolicyHasEnforcedProperties&&this.enforcedPropertiesMissing||this.shareRequiresReview(!0===e)){this.pending=!0,this.shareCreationComplete=!1,_.A.info("Share policy requires a review or has mandated properties (password, expirationDate)...");const e=new C(t);(this.config.enableLinkPasswordByDefault||this.config.enforcePasswordForPublicLink)&&this.$set(e,"newPassword",await Ae(!0));const i=await new Promise(t=>{this.$emit("add:share",e,t)});this.open=!1,this.pending=!1,i.open=!0}else{if(this.share&&!this.share.id){if(this.checkShare(this.share)){try{_.A.info("Sending existing share to server",this.share),await this.pushNewLinkShare(this.share,!0),this.shareCreationComplete=!0,_.A.info("Share created on server",this.share)}catch(e){return this.pending=!1,_.A.error("Error creating share",e),!1}return!0}return this.open=!0,(0,y.Qg)((0,pe.t)("files_sharing","Error, please enter proper password and/or expiration date")),!1}const e=new C(t);await this.pushNewLinkShare(e),this.shareCreationComplete=!0}},async pushNewLinkShare(e,t){try{if(this.loading)return!0;this.loading=!0,this.errors={};const i={path:(this.fileInfo.path+"/"+this.fileInfo.name).replace("//","/"),shareType:c.I.Link,password:e.newPassword,expireDate:e.expireDate??"",attributes:JSON.stringify(this.fileInfo.shareAttributes)};console.debug("Creating link share with options",i);const s=await this.createShare(i);let a;this.open=!1,this.shareCreationComplete=!0,console.debug("Link share created",s),a=t?await new Promise(e=>{this.$emit("update:share",s,e)}):await new Promise(e=>{this.$emit("add:share",s,e)}),await this.getNode(),(0,X.Ic)("files:node:updated",this.node),this.config.enforcePasswordForPublicLink||a.copyLink(),(0,y.Te)((0,pe.t)("files_sharing","Link share created"))}catch(e){const t=e?.response?.data?.ocs?.meta?.message;if(!t)return(0,y.Qg)((0,pe.t)("files_sharing","Error while creating the share")),void console.error(e);throw t.match(/password/i)?this.onSyncError("password",t):t.match(/date/i)?this.onSyncError("expireDate",t):this.onSyncError("pending",t),e}finally{this.loading=!1,this.shareCreationComplete=!0}},async copyLink(){try{await navigator.clipboard.writeText(this.shareLink),(0,y.Te)((0,pe.t)("files_sharing","Link copied")),this.$refs.copyButton.$el.focus()}catch(e){_.A.debug("Failed to automatically copy share link",{error:e}),window.prompt((0,pe.t)("files_sharing","Your browser does not support copying, please copy the link manually:"),this.shareLink)}finally{this.copySuccess=!0,setTimeout(()=>{this.copySuccess=!1},4e3)}},onPasswordChange(e){this.$set(this.share,"newPassword",e)},onPasswordDisable(){this.$set(this.share,"newPassword",""),this.share.id&&this.queueUpdate("password")},onPasswordSubmit(){this.hasUnsavedPassword&&(this.share.newPassword=this.share.newPassword.trim(),this.queueUpdate("password"))},onPasswordProtectedByTalkChange(){this.hasUnsavedPassword&&(this.share.newPassword=this.share.newPassword.trim()),this.queueUpdate("sendPasswordByTalk","password")},onMenuClose(){this.onPasswordSubmit(),this.onNoteSubmit()},onExpirationDateToggleUpdate(e){this.share.expireDate=e?this.formatDateToString(this.config.defaultExpirationDate):""},expirationDateChanged(e){const t=e?.target?.value,i=!!t&&!isNaN(new Date(t).getTime());this.defaultExpirationDateEnabled=i},onCancel(){this.shareCreationComplete||this.$emit("remove:share",this.share)}}},_t=mt;var Ct=s(89669),yt={};yt.styleTagTransform=V(),yt.setAttributes=L(),yt.insert=N().bind(null,"head"),yt.domAPI=D(),yt.insertStyleElement=O(),T()(Ct.A,yt),Ct.A&&Ct.A.locals&&Ct.A.locals;const wt={name:"SharingLinkList",components:{SharingEntryLink:(0,$.A)(_t,function(){var e=this,t=e._self._c;return t("li",{staticClass:"sharing-entry sharing-entry__link",class:{"sharing-entry--share":e.share}},[t("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":!0,"icon-class":e.isEmailShareType?"avatar-link-share icon-mail-white":"avatar-link-share icon-public-white"}}),e._v(" "),t("div",{staticClass:"sharing-entry__summary"},[t("div",{staticClass:"sharing-entry__desc"},[t("span",{staticClass:"sharing-entry__title",attrs:{title:e.title}},[e._v("\n\t\t\t\t"+e._s(e.title)+"\n\t\t\t")]),e._v(" "),e.subtitle?t("p",[e._v("\n\t\t\t\t"+e._s(e.subtitle)+"\n\t\t\t")]):e._e(),e._v(" "),e.share&&void 0!==e.share.permissions?t("SharingEntryQuickShareSelect",{attrs:{share:e.share,"file-info":e.fileInfo},on:{"open-sharing-details":function(t){return e.openShareDetailsForCustomSettings(e.share)}}}):e._e()],1),e._v(" "),t("div",{staticClass:"sharing-entry__actions"},[e.share&&e.share.expireDate?t("ShareExpiryTime",{attrs:{share:e.share}}):e._e(),e._v(" "),t("div",[e.share&&(!e.isEmailShareType||e.isFileRequest)&&e.share.token?t("NcActions",{ref:"copyButton",staticClass:"sharing-entry__copy"},[t("NcActionButton",{attrs:{"aria-label":e.copyLinkLabel,title:e.copySuccess?e.t("files_sharing","Successfully copied public link"):void 0,href:e.shareLink},on:{click:function(t){return t.preventDefault(),e.copyLink.apply(null,arguments)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("NcIconSvgWrapper",{staticClass:"sharing-entry__copy-icon",class:{"sharing-entry__copy-icon--success":e.copySuccess},attrs:{path:e.copySuccess?e.mdiCheck:e.mdiContentCopy}})]},proxy:!0}],null,!1,1728815133)})],1):e._e()],1)],1)]),e._v(" "),!e.pending&&e.pendingDataIsMissing?t("NcActions",{staticClass:"sharing-entry__actions",attrs:{"aria-label":e.actionsTooltip,"menu-align":"right",open:e.open},on:{"update:open":function(t){e.open=t},close:e.onCancel}},[e.errors.pending?t("NcActionText",{staticClass:"error",scopedSlots:e._u([{key:"icon",fn:function(){return[t("ErrorIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1966124155)},[e._v("\n\t\t\t"+e._s(e.errors.pending)+"\n\t\t")]):t("NcActionText",{attrs:{icon:"icon-info"}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Please enter the following required information before creating the share"))+"\n\t\t")]),e._v(" "),e.pendingPassword?t("NcActionCheckbox",{staticClass:"share-link-password-checkbox",attrs:{checked:e.isPasswordProtected,disabled:e.config.enforcePasswordForPublicLink||e.saving},on:{"update:checked":function(t){e.isPasswordProtected=t},uncheck:e.onPasswordDisable}},[e._v("\n\t\t\t"+e._s(e.config.enforcePasswordForPublicLink?e.t("files_sharing","Password protection (enforced)"):e.t("files_sharing","Password protection"))+"\n\t\t")]):e._e(),e._v(" "),e.pendingEnforcedPassword||e.isPasswordProtected?t("NcActionInput",{staticClass:"share-link-password",attrs:{label:e.t("files_sharing","Enter a password"),value:e.share.newPassword,disabled:e.saving,required:e.config.enableLinkPasswordByDefault||e.config.enforcePasswordForPublicLink,minlength:e.isPasswordPolicyEnabled&&e.config.passwordPolicy.minLength,autocomplete:"new-password"},on:{"update:value":function(t){return e.$set(e.share,"newPassword",t)},submit:function(t){return e.onNewLinkShare(!0)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("LockIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2056568168)}):e._e(),e._v(" "),e.pendingDefaultExpirationDate?t("NcActionCheckbox",{staticClass:"share-link-expiration-date-checkbox",attrs:{checked:e.defaultExpirationDateEnabled,disabled:e.pendingEnforcedExpirationDate||e.saving},on:{"update:checked":function(t){e.defaultExpirationDateEnabled=t},"update:model-value":e.onExpirationDateToggleUpdate}},[e._v("\n\t\t\t"+e._s(e.config.isDefaultExpireDateEnforced?e.t("files_sharing","Enable link expiration (enforced)"):e.t("files_sharing","Enable link expiration"))+"\n\t\t")]):e._e(),e._v(" "),(e.pendingDefaultExpirationDate||e.pendingEnforcedExpirationDate)&&e.defaultExpirationDateEnabled?t("NcActionInput",{staticClass:"share-link-expire-date",attrs:{"data-cy-files-sharing-expiration-date-input":"",label:e.pendingEnforcedExpirationDate?e.t("files_sharing","Enter expiration date (enforced)"):e.t("files_sharing","Enter expiration date"),disabled:e.saving,"is-native-picker":!0,"hide-label":!0,value:new Date(e.share.expireDate),type:"date",min:e.dateTomorrow,max:e.maxExpirationDateEnforced},on:{"update:model-value":e.onExpirationChange,change:e.expirationDateChanged},scopedSlots:e._u([{key:"icon",fn:function(){return[t("IconCalendarBlank",{attrs:{size:20}})]},proxy:!0}],null,!1,3418578971)}):e._e(),e._v(" "),t("NcActionButton",{attrs:{disabled:e.pendingEnforcedPassword&&!e.share.newPassword},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onNewLinkShare(!0)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("CheckIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2630571749)},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Create share"))+"\n\t\t")]),e._v(" "),t("NcActionButton",{on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onCancel.apply(null,arguments)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("CloseIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2428343285)},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Cancel"))+"\n\t\t")])],1):e.loading?t("NcLoadingIcon",{staticClass:"sharing-entry__loading"}):t("NcActions",{staticClass:"sharing-entry__actions",attrs:{"aria-label":e.actionsTooltip,"menu-align":"right",open:e.open},on:{"update:open":function(t){e.open=t},close:e.onMenuClose}},[e.share?[e.share.canEdit&&e.canReshare?[t("NcActionButton",{attrs:{disabled:e.saving,"close-after-click":!0},on:{click:function(t){return t.preventDefault(),e.openSharingDetails.apply(null,arguments)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Tune",{attrs:{size:20}})]},proxy:!0}],null,!1,1300586850)},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Customize link"))+"\n\t\t\t\t")])]:e._e(),e._v(" "),t("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(t){t.preventDefault(),e.showQRCode=!0}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("IconQr",{attrs:{size:20}})]},proxy:!0}],null,!1,1082198240)},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Generate QR code"))+"\n\t\t\t")]),e._v(" "),t("NcActionSeparator"),e._v(" "),e._l(e.sortedExternalShareActions,function(i){return t("NcActionButton",{key:i.id,on:{click:function(t){return i.exec(e.share,e.fileInfo.node)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("NcIconSvgWrapper",{attrs:{svg:i.iconSvg}})]},proxy:!0}],null,!0)},[e._v("\n\t\t\t\t"+e._s(i.label(e.share,e.fileInfo.node))+"\n\t\t\t")])}),e._v(" "),e._l(e.externalLegacyShareActions,function(i){return t("SidebarTabExternalActionLegacy",{key:i.id,attrs:{id:i.id,action:i,"file-info":e.fileInfo,share:e.share}})}),e._v(" "),e._l(e.externalLegacyLinkActions,function(i,s){let{icon:a,url:n,name:r}=i;return t("NcActionLink",{key:s,attrs:{href:n(e.shareLink),icon:a,target:"_blank"}},[e._v("\n\t\t\t\t"+e._s(r)+"\n\t\t\t")])}),e._v(" "),!e.isEmailShareType&&e.canReshare?t("NcActionButton",{staticClass:"new-share-link",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onNewLinkShare.apply(null,arguments)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("PlusIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2953566425)},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Add another link"))+"\n\t\t\t")]):e._e(),e._v(" "),e.share.canDelete?t("NcActionButton",{attrs:{disabled:e.saving},on:{click:function(t){return t.preventDefault(),e.onDelete.apply(null,arguments)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("CloseIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2428343285)},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Unshare"))+"\n\t\t\t")]):e._e()]:e.canReshare?t("NcActionButton",{staticClass:"new-share-link",attrs:{title:e.t("files_sharing","Create a new share link"),"aria-label":e.t("files_sharing","Create a new share link"),icon:e.loading?"icon-loading-small":"icon-add"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onNewLinkShare.apply(null,arguments)}}}):e._e()],2),e._v(" "),e.showQRCode?t("NcDialog",{attrs:{size:"normal",open:e.showQRCode,name:e.title,"close-on-click-outside":!0},on:{"update:open":function(t){e.showQRCode=t},close:function(t){e.showQRCode=!1}}},[t("div",{staticClass:"qr-code-dialog"},[t("VueQrcode",{staticClass:"qr-code-dialog__img",attrs:{tag:"img",value:e.shareLink}})],1)]):e._e()],1)},[],!1,null,"ca5c9f60",null).exports},mixins:[ae],props:{fileInfo:{type:Object,default:()=>{},required:!0},shares:{type:Array,default:()=>[],required:!0},canReshare:{type:Boolean,required:!0}},data:()=>({canLinkShare:(0,n.F)().files_sharing.public.enabled}),computed:{hasLinkShares(){return this.shares.filter(e=>e.type===c.I.Link).length>0},hasShares(){return this.shares.length>0}},methods:{t:pe.t,addShare(e,t){this.shares.push(e),this.awaitForShare(e,t)},awaitForShare(e,t){this.$nextTick(()=>{const i=this.$children.find(t=>t.share===e);i&&t(i)})},removeShare(e){const t=this.shares.findIndex(t=>t===e);this.shares.splice(t,1)}}},vt=(0,$.A)(wt,function(){var e=this,t=e._self._c;return e.canLinkShare?t("ul",{staticClass:"sharing-link-list",attrs:{"aria-label":e.t("files_sharing","Link shares")}},[e.hasShares?e._l(e.shares,function(i,s){return t("SharingEntryLink",{key:i.id,attrs:{index:e.shares.length>1?s+1:null,"can-reshare":e.canReshare,share:e.shares[s],"file-info":e.fileInfo},on:{"update:share":[function(t){return e.$set(e.shares,s,t)},function(t){return e.awaitForShare(...arguments)}],"add:share":function(t){return e.addShare(...arguments)},"remove:share":e.removeShare,"open-sharing-details":function(t){return e.openSharingDetails(i)}}})}):e._e(),e._v(" "),!e.hasLinkShares&&e.canReshare?t("SharingEntryLink",{attrs:{"can-reshare":e.canReshare,"file-info":e.fileInfo},on:{"add:share":e.addShare}}):e._e()],2):e._e()},[],!1,null,null,null).exports;var Et=s(26690);const bt={name:"SharingEntry",components:{NcButton:d.A,NcAvatar:h.A,DotsHorizontalIcon:Et.A,NcSelect:Y.default,ShareExpiryTime:ft,SharingEntryQuickShareSelect:ot},mixins:[_e,ae],computed:{title(){let e=this.share.shareWithDisplayName;const i=this.config.showFederatedSharesAsInternal||this.share.isTrustedServer&&this.config.showFederatedSharesToTrustedServersAsInternal;return this.share.type===c.I.Group||this.share.type===c.I.RemoteGroup&&i?e+=` (${t("files_sharing","group")})`:this.share.type===c.I.Room?e+=` (${t("files_sharing","conversation")})`:this.share.type!==c.I.Remote||i?this.share.type===c.I.RemoteGroup?e+=` (${t("files_sharing","remote group")})`:this.share.type===c.I.Guest&&(e+=` (${t("files_sharing","guest")})`):e+=` (${t("files_sharing","remote")})`,!this.isShareOwner&&this.share.ownerDisplayName&&(e+=" "+t("files_sharing","by {initiator}",{initiator:this.share.ownerDisplayName})),e},tooltip(){if(this.share.owner!==this.share.uidFileOwner){const e={user:this.share.shareWithDisplayName,owner:this.share.ownerDisplayName};return this.share.type===c.I.Group?t("files_sharing","Shared with the group {user} by {owner}",e):this.share.type===c.I.Room?t("files_sharing","Shared with the conversation {user} by {owner}",e):t("files_sharing","Shared with {user} by {owner}",e)}return null},hasStatus(){return this.share.type===c.I.User&&"object"==typeof this.share.status&&!Array.isArray(this.share.status)}},methods:{onMenuClose(){this.onNoteSubmit()}}};var St=s(12306),xt={};xt.styleTagTransform=V(),xt.setAttributes=L(),xt.insert=N().bind(null,"head"),xt.domAPI=D(),xt.insertStyleElement=O(),T()(St.A,xt),St.A&&St.A.locals&&St.A.locals;const Tt={name:"SharingList",components:{SharingEntry:(0,$.A)(bt,function(){var e=this,t=e._self._c;return t("li",{staticClass:"sharing-entry"},[t("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":e.share.type!==e.ShareType.User,user:e.share.shareWith,"display-name":e.share.shareWithDisplayName,"menu-position":"left",url:e.share.shareWithAvatar}}),e._v(" "),t("div",{staticClass:"sharing-entry__summary"},[t(e.share.shareWithLink?"a":"div",{tag:"component",staticClass:"sharing-entry__summary__desc",attrs:{title:e.tooltip,"aria-label":e.tooltip,href:e.share.shareWithLink}},[t("span",[e._v(e._s(e.title)+"\n\t\t\t\t"),e.isUnique?e._e():t("span",{staticClass:"sharing-entry__summary__desc-unique"},[e._v("\n\t\t\t\t\t("+e._s(e.share.shareWithDisplayNameUnique)+")\n\t\t\t\t")]),e._v(" "),e.hasStatus&&e.share.status.message?t("small",[e._v("("+e._s(e.share.status.message)+")")]):e._e()])]),e._v(" "),t("SharingEntryQuickShareSelect",{attrs:{share:e.share,"file-info":e.fileInfo},on:{"open-sharing-details":function(t){return e.openShareDetailsForCustomSettings(e.share)}}})],1),e._v(" "),e.share&&e.share.expireDate?t("ShareExpiryTime",{attrs:{share:e.share}}):e._e(),e._v(" "),e.share.canEdit?t("NcButton",{staticClass:"sharing-entry__action",attrs:{"data-cy-files-sharing-share-actions":"","aria-label":e.t("files_sharing","Open Sharing Details"),type:"tertiary"},on:{click:function(t){return e.openSharingDetails(e.share)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("DotsHorizontalIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1700783217)}):e._e()],1)},[],!1,null,"251feb63",null).exports},mixins:[ae],props:{fileInfo:{type:Object,default:()=>{},required:!0},shares:{type:Array,default:()=>[],required:!0}},setup:()=>({t:pe.t}),computed:{hasShares(){return 0===this.shares.length},isUnique(){return e=>[...this.shares].filter(t=>e.type===c.I.User&&e.shareWithDisplayName===t.shareWithDisplayName).length<=1}}},It=(0,$.A)(Tt,function(){var e=this,t=e._self._c;return t("ul",{staticClass:"sharing-sharee-list",attrs:{"aria-label":e.t("files_sharing","Shares")}},e._l(e.shares,function(i){return t("SharingEntry",{key:i.id,attrs:{"file-info":e.fileInfo,share:i,"is-unique":e.isUnique(i)},on:{"open-sharing-details":function(t){return e.openSharingDetails(i)}}})}),1)},[],!1,null,null,null).exports;var Dt=s(32073),kt=s(48198),Nt=s(16879),Pt=s(16044),Lt=s(177),Rt=s(16039);const Ot={name:"EmailIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ft=(0,$.A)(Ot,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon email-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports;var Vt=s(36600);const Bt={name:"AccountGroupIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Mt=(0,$.A)(Bt,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon account-group-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,$t={name:"ShareCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ut=(0,$.A)($t,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon share-circle-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M14 16V13C10.39 13 7.81 14.43 6 17C6.72 13.33 8.94 9.73 14 9V6L19 11L14 16Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,Ht={name:"AccountCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Gt=(0,$.A)(Ht,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon account-circle-outline-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7.07,18.28C7.5,17.38 10.12,16.5 12,16.5C13.88,16.5 16.5,17.38 16.93,18.28C15.57,19.36 13.86,20 12,20C10.14,20 8.43,19.36 7.07,18.28M18.36,16.83C16.93,15.09 13.46,14.5 12,14.5C10.54,14.5 7.07,15.09 5.64,16.83C4.62,15.5 4,13.82 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,13.82 19.38,15.5 18.36,16.83M12,6C10.06,6 8.5,7.56 8.5,9.5C8.5,11.44 10.06,13 12,13C13.94,13 15.5,11.44 15.5,9.5C15.5,7.56 13.94,6 12,6M12,11A1.5,1.5 0 0,1 10.5,9.5A1.5,1.5 0 0,1 12,8A1.5,1.5 0 0,1 13.5,9.5A1.5,1.5 0 0,1 12,11Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,qt={name:"EyeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Wt=(0,$.A)(qt,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon eye-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports;var jt=s(25384),zt=s(33388);const Yt={name:"RefreshIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Xt=(0,$.A)(Yt,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon refresh-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,Qt=(0,Ie.pM)({__name:"SidebarTabExternalAction",props:{action:{type:Object,required:!0},node:{type:Object,required:!0},share:{type:Object,required:!0}},setup(e,t){let{expose:i}=t;const s=e;i({save:r});const a=(0,Ie.KR)(),n=(0,Ie.KR)();async function r(){await(n.value?.())}function o(e){n.value=e}return(0,Ie.nT)(()=>{a.value&&(a.value.node=(0,Ie.ux)(s.node),a.value.onSave=o,a.value.share=(0,Ie.ux)(s.share))}),{__sfc:!0,props:s,actionElement:a,savingCallback:n,save:r,onSave:o}}}),Zt=(0,$.A)(Qt,function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(e.action.element,{key:e.action.id,ref:"actionElement",tag:"component",domProps:{share:e.share,node:e.node,onSave:i.onSave}})},[],!1,null,null,null).exports,Kt={name:"SharingDetailsTab",components:{NcAvatar:h.A,NcButton:d.A,NcCheckboxRadioSwitch:Dt.A,NcDateTimePickerNative:kt.A,NcInputField:Nt.A,NcLoadingIcon:Fe.A,NcPasswordField:Pt.A,NcTextArea:Lt.A,CloseIcon:Xe.A,CircleIcon:Rt.A,EditIcon:tt.A,LinkIcon:Vt.A,GroupIcon:Mt,ShareIcon:Ut,UserIcon:Gt,UploadIcon:it.A,ViewIcon:Wt,MenuDownIcon:jt.A,MenuUpIcon:zt.A,DotsHorizontalIcon:Et.A,Refresh:Xt,SidebarTabExternalAction:Zt,SidebarTabExternalActionLegacy:gt},mixins:[Z,_e],props:{shareRequestValue:{type:Object,required:!1},fileInfo:{type:Object,required:!0},share:{type:Object,required:!0}},data(){return{writeNoteToRecipientIsChecked:!1,sharingPermission:se.ALL.toString(),revertSharingPermission:se.ALL.toString(),setCustomPermissions:!1,passwordError:!1,advancedSectionAccordionExpanded:!1,bundledPermissions:se,isFirstComponentLoad:!0,test:!1,creating:!1,initialToken:this.share.token,loadingToken:!1,externalShareActions:[...window._nc_files_sharing_sidebar_actions?.values()??[]],ExternalShareActions:OCA.Sharing.ExternalShareActions.state}},computed:{title(){switch(this.share.type){case c.I.User:return t("files_sharing","Share with {user}",{user:this.share.shareWithDisplayName});case c.I.Email:return t("files_sharing","Share with email {email}",{email:this.share.shareWith});case c.I.Link:return t("files_sharing","Share link");case c.I.Group:return t("files_sharing","Share with group");case c.I.Room:return t("files_sharing","Share in conversation");case c.I.Remote:{const[e,i]=this.share.shareWith.split("@");return this.config.showFederatedSharesAsInternal?t("files_sharing","Share with {user}",{user:e}):t("files_sharing","Share with {user} on remote server {server}",{user:e,server:i})}case c.I.RemoteGroup:return t("files_sharing","Share with remote group");case c.I.Guest:return t("files_sharing","Share with guest");default:return this.share.id?t("files_sharing","Update share"):t("files_sharing","Create share")}},allPermissions(){return this.isFolder?this.bundledPermissions.ALL.toString():this.bundledPermissions.ALL_FILE.toString()},canEdit:{get(){return this.share.hasUpdatePermission},set(e){this.updateAtomicPermissions({isEditChecked:e})}},canCreate:{get(){return this.share.hasCreatePermission},set(e){this.updateAtomicPermissions({isCreateChecked:e})}},canDelete:{get(){return this.share.hasDeletePermission},set(e){this.updateAtomicPermissions({isDeleteChecked:e})}},canReshare:{get(){return this.share.hasSharePermission},set(e){this.updateAtomicPermissions({isReshareChecked:e})}},showInGridView:{get(){return this.getShareAttribute("config","grid_view",!1)},set(e){this.setShareAttribute("config","grid_view",e)}},canDownload:{get(){return this.getShareAttribute("permissions","download",!0)},set(e){this.setShareAttribute("permissions","download",e)}},hasRead:{get(){return this.share.hasReadPermission},set(e){this.updateAtomicPermissions({isReadChecked:e})}},hasExpirationDate:{get(){return this.isValidShareAttribute(this.share.expireDate)},set(e){this.share.expireDate=e?this.formatDateToString(this.defaultExpiryDate):""}},isFolder(){return"dir"===this.fileInfo.type},isSetDownloadButtonVisible(){return this.isFolder||["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation"].includes(this.fileInfo.mimetype)},isPasswordEnforced(){return this.isPublicShare&&this.config.enforcePasswordForPublicLink},defaultExpiryDate(){return(this.isGroupShare||this.isUserShare)&&this.config.isDefaultInternalExpireDateEnabled?new Date(this.config.defaultInternalExpirationDate):this.isRemoteShare&&this.config.isDefaultRemoteExpireDateEnabled?new Date(this.config.defaultRemoteExpireDateEnabled):this.isPublicShare&&this.config.isDefaultExpireDateEnabled?new Date(this.config.defaultExpirationDate):new Date((new Date).setDate((new Date).getDate()+1))},isUserShare(){return this.share.type===c.I.User},isGroupShare(){return this.share.type===c.I.Group},allowsFileDrop(){return!(!this.isFolder||!this.config.isPublicUploadEnabled||this.share.type!==c.I.Link&&this.share.type!==c.I.Email)},hasFileDropPermissions(){return this.share.permissions===this.bundledPermissions.FILE_DROP},shareButtonText(){return this.isNewShare?t("files_sharing","Save share"):t("files_sharing","Update share")},resharingIsPossible(){return this.config.isResharingAllowed&&this.share.type!==c.I.Link&&this.share.type!==c.I.Email},canSetEdit(){return this.fileInfo.sharePermissions&OC.PERMISSION_UPDATE||this.canEdit},canSetCreate(){return this.fileInfo.sharePermissions&OC.PERMISSION_CREATE||this.canCreate},canSetDelete(){return this.fileInfo.sharePermissions&OC.PERMISSION_DELETE||this.canDelete},canSetReshare(){return this.fileInfo.sharePermissions&OC.PERMISSION_SHARE||this.canReshare},canSetDownload(){return this.fileInfo.canDownload()||this.canDownload},canRemoveReadPermission(){return this.allowsFileDrop&&(this.share.type===c.I.Link||this.share.type===c.I.Email)},hasUnsavedPassword(){return void 0!==this.share.newPassword},passwordExpirationTime(){if(!this.isValidShareAttribute(this.share.passwordExpirationTime))return null;const e=(0,g.A)(this.share.passwordExpirationTime);return!(e.diff((0,g.A)())<0)&&e.fromNow()},isTalkEnabled:()=>void 0!==OC.appswebroots.spreed,isPasswordProtectedByTalkAvailable(){return this.isPasswordProtected&&this.isTalkEnabled},isPasswordProtectedByTalk:{get(){return this.share.sendPasswordByTalk},async set(e){this.share.sendPasswordByTalk=e}},isEmailShareType(){return!!this.share&&this.share.type===c.I.Email},canTogglePasswordProtectedByTalkAvailable(){return!(!this.isPublicShare||!this.isPasswordProtected||this.isEmailShareType&&!this.hasUnsavedPassword||void 0===OC.appswebroots.spreed)},canChangeHideDownload(){return this.fileInfo.shareAttributes.some(e=>"download"===e.key&&"permissions"===e.scope&&!1===e.value)},customPermissionsList(){const e={[K]:this.t("files_sharing","Read"),[ee]:this.t("files_sharing","Create"),[J]:this.t("files_sharing","Edit"),[ie]:this.t("files_sharing","Share"),[te]:this.t("files_sharing","Delete")};return[K,...this.isFolder?[4]:[],J,...this.resharingIsPossible?[ie]:[],...this.isFolder?[8]:[]].filter(e=>{return t=this.share.permissions,i=e,0!==t&&(t&i)===i;var t,i}).map((t,i)=>0===i?e[t]:e[t].toLocaleLowerCase((0,pe.Z0)())).join(", ")},advancedControlExpandedValue(){return this.advancedSectionAccordionExpanded?"true":"false"},errorPasswordLabel(){if(this.passwordError)return t("files_sharing","Password field cannot be empty")},passwordHint(){if(!this.isNewShare&&!this.hasUnsavedPassword)return t("files_sharing","Replace current password")},sortedExternalShareActions(){return this.externalShareActions.filter(e=>e.enabled((0,Ie.ux)(this.share),(0,Ie.ux)(this.fileInfo.node))).sort((e,t)=>e.order-t.order)},externalLegacyShareActions(){const e=e=>(e.shareType.includes(c.I.Link)||e.shareType.includes(c.I.Email))&&e.advanced;return console.error("legacy details tab",this.ExternalShareActions,this.ExternalShareActions.actions.filter(e)),this.ExternalShareActions.actions.filter(e)}},watch:{setCustomPermissions(e){this.sharingPermission=e?"custom":this.revertSharingPermission}},beforeMount(){this.initializePermissions(),this.initializeAttributes(),_.A.debug("Share object received",{share:this.share}),_.A.debug("Configuration object received",{config:this.config})},mounted(){this.$refs.quickPermissions?.querySelector("input:checked")?.focus()},methods:{setShareAttribute(e,t,i){this.share.attributes||this.$set(this.share,"attributes",[]);const s=this.share.attributes.find(i=>i.scope===e||i.key===t);s?s.value=i:this.share.attributes.push({scope:e,key:t,value:i})},getShareAttribute(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const s=this.share.attributes?.find(i=>i.scope===e&&i.key===t);return s?.value??i},async generateNewToken(){if(!this.loadingToken){this.loadingToken=!0;try{this.share.token=await(async()=>{const{data:e}=await A.Ay.get((0,l.KT)("/apps/files_sharing/api/v1/token"));return e.ocs.data.token})()}catch(e){(0,y.Qg)(t("files_sharing","Failed to generate a new token"))}this.loadingToken=!1}},cancel(){this.share.token=this.initialToken,this.$emit("close-sharing-details")},updateAtomicPermissions(){let{isReadChecked:e=this.hasRead,isEditChecked:t=this.canEdit,isCreateChecked:i=this.canCreate,isDeleteChecked:s=this.canDelete,isReshareChecked:a=this.canReshare}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isFolder||!i&&!s||(_.A.debug("Ignoring create/delete permissions for file share  only available for folders"),i=!1,s=!1);const n=0|(e?K:0)|(i?4:0)|(s?8:0)|(t?J:0)|(a?ie:0);this.share.permissions=n},expandCustomPermissions(){this.advancedSectionAccordionExpanded||(this.advancedSectionAccordionExpanded=!0),this.toggleCustomPermissions()},toggleCustomPermissions(e){const t="custom"===this.sharingPermission;this.revertSharingPermission=t?"custom":e,this.setCustomPermissions=t},async initializeAttributes(){if(this.isNewShare)return(this.config.enableLinkPasswordByDefault||this.isPasswordEnforced)&&this.isPublicShare&&(this.$set(this.share,"newPassword",await Ae(!0)),this.advancedSectionAccordionExpanded=!0),this.isPublicShare&&this.config.isDefaultExpireDateEnabled?this.share.expireDate=this.config.defaultExpirationDate.toDateString():this.isRemoteShare&&this.config.isDefaultRemoteExpireDateEnabled?this.share.expireDate=this.config.defaultRemoteExpirationDateString.toDateString():this.config.isDefaultInternalExpireDateEnabled&&(this.share.expireDate=this.config.defaultInternalExpirationDate.toDateString()),void(this.isValidShareAttribute(this.share.expireDate)&&(this.advancedSectionAccordionExpanded=!0));!this.isValidShareAttribute(this.share.expireDate)&&this.isExpiryDateEnforced&&(this.hasExpirationDate=!0),(this.isValidShareAttribute(this.share.password)||this.isValidShareAttribute(this.share.expireDate)||this.isValidShareAttribute(this.share.label))&&(this.advancedSectionAccordionExpanded=!0),this.isValidShareAttribute(this.share.note)&&(this.writeNoteToRecipientIsChecked=!0,this.advancedSectionAccordionExpanded=!0)},handleShareType(){"shareType"in this.share?this.share.type=this.share.shareType:this.share.share_type&&(this.share.type=this.share.share_type)},handleDefaultPermissions(){if(this.isNewShare){const e=this.config.defaultPermissions;e===se.READ_ONLY||e===se.ALL?this.sharingPermission=e.toString():(this.sharingPermission="custom",this.share.permissions=e,this.advancedSectionAccordionExpanded=!0,this.setCustomPermissions=!0)}this.canRemoveReadPermission||(this.hasRead=!0)},handleCustomPermissions(){this.isNewShare||!this.hasCustomPermissions&&!this.share.setCustomPermissions?this.share.permissions&&(this.sharingPermission=this.share.permissions.toString()):(this.sharingPermission="custom",this.advancedSectionAccordionExpanded=!0,this.setCustomPermissions=!0)},initializePermissions(){this.handleShareType(),this.handleDefaultPermissions(),this.handleCustomPermissions()},async saveShare(){const e=["permissions","attributes","note","expireDate"],t=["label","password","hideDownload"];this.config.allowCustomTokens&&t.push("token"),this.isPublicShare&&e.push(...t);const i=parseInt(this.sharingPermission);if(this.setCustomPermissions?this.updateAtomicPermissions():this.share.permissions=i,this.isFolder||this.share.permissions!==se.ALL||(this.share.permissions=se.ALL_FILE),this.writeNoteToRecipientIsChecked||(this.share.note=""),this.isPasswordProtected?this.isPasswordEnforced&&this.isNewShare&&!this.isValidShareAttribute(this.share.newPassword)&&(this.passwordError=!0):this.share.password="",this.hasExpirationDate||(this.share.expireDate=""),this.isNewShare){const t={permissions:this.share.permissions,shareType:this.share.type,shareWith:this.share.shareWith,attributes:this.share.attributes,note:this.share.note,fileInfo:this.fileInfo};let i;t.expireDate=this.hasExpirationDate?this.share.expireDate:"",this.isPasswordProtected&&(t.password=this.share.newPassword);try{this.creating=!0,i=await this.addShare(t)}catch(e){return void(this.creating=!1)}this.share._share.id=i.id,await this.queueUpdate(...e);for(const t of e)if(t in i&&t in this.share)try{i[t]=this.share[t]}catch{i._share[t]=this.share[t]}this.share=i,this.creating=!1,this.$emit("add:share",this.share)}else await this.queueUpdate(...e),this.$emit("update:share",this.share);if(await this.getNode(),(0,X.Ic)("files:node:updated",this.node),this.$refs.externalShareActions?.length>0){const e=this.$refs.externalShareActions;await Promise.allSettled(e.map(e=>e.save()))}this.$refs.externalLinkActions?.length>0&&await Promise.allSettled(this.$refs.externalLinkActions.map(e=>"function"!=typeof e.$children.at(0)?.onSave?Promise.resolve():e.$children.at(0)?.onSave?.())),this.$emit("close-sharing-details")},async addShare(e){_.A.debug("Adding a new share from the input for",{share:e});const t=this.path;try{return await this.createShare({path:t,shareType:e.shareType,shareWith:e.shareWith,permissions:e.permissions,expireDate:e.expireDate,attributes:JSON.stringify(e.attributes),...e.note?{note:e.note}:{},...e.password?{password:e.password}:{}})}catch(e){_.A.error("Error while adding new share",{error:e})}},async removeShare(){await this.onDelete(),await this.getNode(),(0,X.Ic)("files:node:updated",this.node),this.$emit("close-sharing-details")},onPasswordChange(e){if(""===e)return this.$delete(this.share,"newPassword"),void(this.passwordError=this.isNewShare&&this.isPasswordEnforced);this.passwordError=!this.isValidShareAttribute(e),this.$set(this.share,"newPassword",e)},onPasswordProtectedByTalkChange(){this.queueUpdate("sendPasswordByTalk","password")},isValidShareAttribute:e=>![null,void 0].includes(e)&&e.trim().length>0,getShareTypeIcon(e){switch(e){case c.I.Link:return Vt.A;case c.I.Guest:return Gt;case c.I.RemoteGroup:case c.I.Group:return Mt;case c.I.Email:return Ft;case c.I.Team:return Rt.A;case c.I.Room:case c.I.Deck:case c.I.ScienceMesh:return Ut;default:return null}}}};var Jt=s(71547),ei={};ei.styleTagTransform=V(),ei.setAttributes=L(),ei.insert=N().bind(null,"head"),ei.domAPI=D(),ei.insertStyleElement=O(),T()(Jt.A,ei),Jt.A&&Jt.A.locals&&Jt.A.locals;const ti=(0,$.A)(Kt,function(){var e=this,t=e._self._c;return t("div",{staticClass:"sharingTabDetailsView"},[t("div",{staticClass:"sharingTabDetailsView__header"},[t("span",[e.isUserShare?t("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":e.share.shareType!==e.ShareType.User,user:e.share.shareWith,"display-name":e.share.shareWithDisplayName,"menu-position":"left",url:e.share.shareWithAvatar}}):e._e(),e._v(" "),t(e.getShareTypeIcon(e.share.type),{tag:"component",attrs:{size:32}})],1),e._v(" "),t("span",[t("h1",[e._v(e._s(e.title))])])]),e._v(" "),t("div",{staticClass:"sharingTabDetailsView__wrapper"},[t("div",{ref:"quickPermissions",staticClass:"sharingTabDetailsView__quick-permissions"},[t("div",[t("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,"data-cy-files-sharing-share-permissions-bundle":"read-only",checked:e.sharingPermission,value:e.bundledPermissions.READ_ONLY.toString(),name:"sharing_permission_radio",type:"radio","button-variant-grouped":"vertical"},on:{"update:checked":[function(t){e.sharingPermission=t},e.toggleCustomPermissions]},scopedSlots:e._u([{key:"icon",fn:function(){return[t("ViewIcon",{attrs:{size:20}})]},proxy:!0}])},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","View only"))+"\n\t\t\t\t\t")]),e._v(" "),t("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,"data-cy-files-sharing-share-permissions-bundle":"upload-edit",checked:e.sharingPermission,value:e.allPermissions,name:"sharing_permission_radio",type:"radio","button-variant-grouped":"vertical"},on:{"update:checked":[function(t){e.sharingPermission=t},e.toggleCustomPermissions]},scopedSlots:e._u([{key:"icon",fn:function(){return[t("EditIcon",{attrs:{size:20}})]},proxy:!0}])},[e.allowsFileDrop?[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Allow upload and editing"))+"\n\t\t\t\t\t")]:[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Allow editing"))+"\n\t\t\t\t\t")]],2),e._v(" "),e.allowsFileDrop?t("NcCheckboxRadioSwitch",{attrs:{"data-cy-files-sharing-share-permissions-bundle":"file-drop","button-variant":!0,checked:e.sharingPermission,value:e.bundledPermissions.FILE_DROP.toString(),name:"sharing_permission_radio",type:"radio","button-variant-grouped":"vertical"},on:{"update:checked":[function(t){e.sharingPermission=t},e.toggleCustomPermissions]},scopedSlots:e._u([{key:"icon",fn:function(){return[t("UploadIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1083194048)},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","File request"))+"\n\t\t\t\t\t"),t("small",{staticClass:"subline"},[e._v(e._s(e.t("files_sharing","Upload only")))])]):e._e(),e._v(" "),t("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,"data-cy-files-sharing-share-permissions-bundle":"custom",checked:e.sharingPermission,value:"custom",name:"sharing_permission_radio",type:"radio","button-variant-grouped":"vertical"},on:{"update:checked":[function(t){e.sharingPermission=t},e.expandCustomPermissions]},scopedSlots:e._u([{key:"icon",fn:function(){return[t("DotsHorizontalIcon",{attrs:{size:20}})]},proxy:!0}])},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Custom permissions"))+"\n\t\t\t\t\t"),t("small",{staticClass:"subline"},[e._v(e._s(e.customPermissionsList))])])],1)]),e._v(" "),t("div",{staticClass:"sharingTabDetailsView__advanced-control"},[t("NcButton",{attrs:{id:"advancedSectionAccordionAdvancedControl",type:"tertiary",alignment:"end-reverse","aria-controls":"advancedSectionAccordionAdvanced","aria-expanded":e.advancedControlExpandedValue},on:{click:function(t){e.advancedSectionAccordionExpanded=!e.advancedSectionAccordionExpanded}},scopedSlots:e._u([{key:"icon",fn:function(){return[e.advancedSectionAccordionExpanded?t("MenuUpIcon"):t("MenuDownIcon")]},proxy:!0}])},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Advanced settings"))+"\n\t\t\t\t")])],1),e._v(" "),e.advancedSectionAccordionExpanded?t("div",{staticClass:"sharingTabDetailsView__advanced",attrs:{id:"advancedSectionAccordionAdvanced","aria-labelledby":"advancedSectionAccordionAdvancedControl",role:"region"}},[t("section",[e.isPublicShare?t("NcInputField",{staticClass:"sharingTabDetailsView__label",attrs:{autocomplete:"off",label:e.t("files_sharing","Share label"),value:e.share.label},on:{"update:value":function(t){return e.$set(e.share,"label",t)}}}):e._e(),e._v(" "),e.config.allowCustomTokens&&e.isPublicShare&&!e.isNewShare?t("NcInputField",{attrs:{autocomplete:"off",label:e.t("files_sharing","Share link token"),"helper-text":e.t("files_sharing","Set the public share link token to something easy to remember or generate a new token. It is not recommended to use a guessable token for shares which contain sensitive information."),"show-trailing-button":"","trailing-button-label":e.loadingToken?e.t("files_sharing","Generating"):e.t("files_sharing","Generate new token"),value:e.share.token},on:{"update:value":function(t){return e.$set(e.share,"token",t)},"trailing-button-click":e.generateNewToken},scopedSlots:e._u([{key:"trailing-button-icon",fn:function(){return[e.loadingToken?t("NcLoadingIcon"):t("Refresh",{attrs:{size:20}})]},proxy:!0}],null,!1,4228062821)}):e._e(),e._v(" "),e.isPublicShare?[t("NcCheckboxRadioSwitch",{attrs:{checked:e.isPasswordProtected,disabled:e.isPasswordEnforced},on:{"update:checked":function(t){e.isPasswordProtected=t}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Set password"))+"\n\t\t\t\t\t")]),e._v(" "),e.isPasswordProtected?t("NcPasswordField",{attrs:{autocomplete:"new-password",value:e.share.newPassword??"",error:e.passwordError,"helper-text":e.errorPasswordLabel||e.passwordHint,required:e.isPasswordEnforced&&e.isNewShare,label:e.t("files_sharing","Password")},on:{"update:value":e.onPasswordChange}}):e._e(),e._v(" "),e.isEmailShareType&&e.passwordExpirationTime?t("span",{attrs:{icon:"icon-info"}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Password expires {passwordExpirationTime}",{passwordExpirationTime:e.passwordExpirationTime}))+"\n\t\t\t\t\t")]):e.isEmailShareType&&null!==e.passwordExpirationTime?t("span",{attrs:{icon:"icon-error"}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Password expired"))+"\n\t\t\t\t\t")]):e._e()]:e._e(),e._v(" "),e.canTogglePasswordProtectedByTalkAvailable?t("NcCheckboxRadioSwitch",{attrs:{checked:e.isPasswordProtectedByTalk},on:{"update:checked":[function(t){e.isPasswordProtectedByTalk=t},e.onPasswordProtectedByTalkChange]}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Video verification"))+"\n\t\t\t\t")]):e._e(),e._v(" "),t("NcCheckboxRadioSwitch",{attrs:{checked:e.hasExpirationDate,disabled:e.isExpiryDateEnforced},on:{"update:checked":function(t){e.hasExpirationDate=t}}},[e._v("\n\t\t\t\t\t"+e._s(e.isExpiryDateEnforced?e.t("files_sharing","Expiration date (enforced)"):e.t("files_sharing","Set expiration date"))+"\n\t\t\t\t")]),e._v(" "),e.hasExpirationDate?t("NcDateTimePickerNative",{attrs:{id:"share-date-picker",value:new Date(e.share.expireDate??e.dateTomorrow),min:e.dateTomorrow,max:e.maxExpirationDateEnforced,"hide-label":"",label:e.t("files_sharing","Expiration date"),placeholder:e.t("files_sharing","Expiration date"),type:"date"},on:{input:e.onExpirationChange}}):e._e(),e._v(" "),e.isPublicShare?t("NcCheckboxRadioSwitch",{attrs:{disabled:e.canChangeHideDownload,checked:e.share.hideDownload},on:{"update:checked":[function(t){return e.$set(e.share,"hideDownload",t)},function(t){return e.queueUpdate("hideDownload")}]}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Hide download"))+"\n\t\t\t\t")]):t("NcCheckboxRadioSwitch",{attrs:{disabled:!e.canSetDownload,checked:e.canDownload,"data-cy-files-sharing-share-permissions-checkbox":"download"},on:{"update:checked":function(t){e.canDownload=t}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Allow download and sync"))+"\n\t\t\t\t")]),e._v(" "),t("NcCheckboxRadioSwitch",{attrs:{checked:e.writeNoteToRecipientIsChecked},on:{"update:checked":function(t){e.writeNoteToRecipientIsChecked=t}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Note to recipient"))+"\n\t\t\t\t")]),e._v(" "),e.writeNoteToRecipientIsChecked?[t("NcTextArea",{attrs:{label:e.t("files_sharing","Note to recipient"),placeholder:e.t("files_sharing","Enter a note for the share recipient"),value:e.share.note},on:{"update:value":function(t){return e.$set(e.share,"note",t)}}})]:e._e(),e._v(" "),e.isPublicShare&&e.isFolder?t("NcCheckboxRadioSwitch",{attrs:{checked:e.showInGridView},on:{"update:checked":function(t){e.showInGridView=t}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Show files in grid view"))+"\n\t\t\t\t")]):e._e(),e._v(" "),e._l(e.sortedExternalShareActions,function(i){return t("SidebarTabExternalAction",{key:i.id,ref:"externalShareActions",refInFor:!0,attrs:{action:i,node:e.fileInfo.node,share:e.share}})}),e._v(" "),e._l(e.externalLegacyShareActions,function(i){return t("SidebarTabExternalActionLegacy",{key:i.id,ref:"externalLinkActions",refInFor:!0,attrs:{id:i.id,action:i,"file-info":e.fileInfo,share:e.share}})}),e._v(" "),t("NcCheckboxRadioSwitch",{attrs:{checked:e.setCustomPermissions},on:{"update:checked":function(t){e.setCustomPermissions=t}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Custom permissions"))+"\n\t\t\t\t")]),e._v(" "),e.setCustomPermissions?t("section",{staticClass:"custom-permissions-group"},[t("NcCheckboxRadioSwitch",{attrs:{disabled:!e.canRemoveReadPermission,checked:e.hasRead,"data-cy-files-sharing-share-permissions-checkbox":"read"},on:{"update:checked":function(t){e.hasRead=t}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Read"))+"\n\t\t\t\t\t")]),e._v(" "),e.isFolder?t("NcCheckboxRadioSwitch",{attrs:{disabled:!e.canSetCreate,checked:e.canCreate,"data-cy-files-sharing-share-permissions-checkbox":"create"},on:{"update:checked":function(t){e.canCreate=t}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Create"))+"\n\t\t\t\t\t")]):e._e(),e._v(" "),t("NcCheckboxRadioSwitch",{attrs:{disabled:!e.canSetEdit,checked:e.canEdit,"data-cy-files-sharing-share-permissions-checkbox":"update"},on:{"update:checked":function(t){e.canEdit=t}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Edit"))+"\n\t\t\t\t\t")]),e._v(" "),e.resharingIsPossible?t("NcCheckboxRadioSwitch",{attrs:{disabled:!e.canSetReshare,checked:e.canReshare,"data-cy-files-sharing-share-permissions-checkbox":"share"},on:{"update:checked":function(t){e.canReshare=t}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Share"))+"\n\t\t\t\t\t")]):e._e(),e._v(" "),t("NcCheckboxRadioSwitch",{attrs:{disabled:!e.canSetDelete,checked:e.canDelete,"data-cy-files-sharing-share-permissions-checkbox":"delete"},on:{"update:checked":function(t){e.canDelete=t}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("files_sharing","Delete"))+"\n\t\t\t\t\t")])],1):e._e()],2)]):e._e()]),e._v(" "),t("div",{staticClass:"sharingTabDetailsView__footer"},[t("div",{staticClass:"button-group"},[t("NcButton",{attrs:{"data-cy-files-sharing-share-editor-action":"cancel"},on:{click:e.cancel}},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Cancel"))+"\n\t\t\t")]),e._v(" "),t("div",{staticClass:"sharingTabDetailsView__delete"},[e.isNewShare?e._e():t("NcButton",{attrs:{"aria-label":e.t("files_sharing","Delete share"),disabled:!1,readonly:!1,variant:"tertiary"},on:{click:function(t){return t.preventDefault(),e.removeShare.apply(null,arguments)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("CloseIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2428343285)},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Delete share"))+"\n\t\t\t\t")])],1),e._v(" "),t("NcButton",{attrs:{type:"primary","data-cy-files-sharing-share-editor-action":"save",disabled:e.creating},on:{click:e.saveShare},scopedSlots:e._u([e.creating?{key:"icon",fn:function(){return[t("NcLoadingIcon")]},proxy:!0}:null],null,!0)},[e._v("\n\t\t\t\t"+e._s(e.shareButtonText)+"\n\t\t\t\t")])],1)])])},[],!1,null,"52070568",null).exports,ii=(0,Ie.pM)({__name:"SidebarTabExternalSection",props:{node:{type:Object,required:!0},section:{type:Object,required:!0}},setup(e){const t=e,i=(0,Ie.KR)();return(0,Ie.nT)(()=>{i.value.node=t.node}),{__sfc:!0,props:t,sectionElement:i}}}),si=(0,$.A)(ii,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(e.section.element,{ref:"sectionElement",tag:"component",domProps:{node:e.node}})},[],!1,null,null,null).exports,ai=(0,Ie.pM)({__name:"SidebarTabExternalSectionLegacy",props:{fileInfo:{type:Object,required:!0},sectionCallback:{type:Function,required:!0}},setup(e){const t=e,i=(0,Ie.EW)(()=>t.sectionCallback(void 0,t.fileInfo));return{__sfc:!0,props:t,component:i}}});var ni=s(22441),ri={};ri.styleTagTransform=V(),ri.setAttributes=L(),ri.insert=N().bind(null,"head"),ri.domAPI=D(),ri.insertStyleElement=O(),T()(ni.A,ri),ni.A&&ni.A.locals&&ni.A.locals;const oi=(0,$.A)(ai,function(){var e=this,t=e._self._c;return t("div",{staticClass:"sharing-tab-external-section-legacy"},[t(e._self._setupProxy.component,{tag:"component",attrs:{"file-info":e.fileInfo}})],1)},[],!1,null,"7c3e42b5",null).exports,li=window.OC.theme.productName,ci={name:"SharingTab",components:{InfoIcon:f.A,NcAvatar:h.A,NcButton:d.A,NcCollectionList:u.N,NcPopover:p.N,SharingEntryInternal:W,SharingEntrySimple:U,SharingInherited:xe,SharingInput:le,SharingLinkList:vt,SharingList:It,SharingDetailsTab:ti,SidebarTabExternalSection:si,SidebarTabExternalSectionLegacy:oi},mixins:[ae],data:()=>({config:new m,deleteEvent:null,error:"",expirationInterval:null,loading:!0,fileInfo:null,reshare:null,sharedWithMe:{},shares:[],linkShares:[],externalShares:[],legacySections:OCA.Sharing.ShareTabSections.getSections(),sections:[...window._nc_files_sharing_sidebar_sections?.values()??[]],projectsEnabled:(0,o.C)("core","projects_enabled",!1),showSharingDetailsView:!1,shareDetailsData:{},returnFocusElement:null,internalSharesHelpText:t("files_sharing","Share files within your organization. Recipients who can already view the file can also use this link for easy access."),externalSharesHelpText:t("files_sharing","Share files with others outside your organization via public links and email addresses. You can also share to {productName} accounts on other instances using their federated cloud ID.",{productName:li}),additionalSharesHelpText:t("files_sharing","Shares from apps or other sources which are not included in internal or external shares.")}),computed:{hasExternalSections(){return this.sections.length>0||this.legacySections.length>0},sortedExternalSections(){return this.sections.filter(e=>e.enabled(this.fileInfo.node)).sort((e,t)=>e.order-t.order)},isSharedWithMe(){return!!this.sharedWithMe?.user},isLinkSharingAllowed(){if(!(0,a.HW)())return!1;const e=(0,n.F)();return!0===(e.files_sharing?.public||{}).enabled},canReshare(){return!!(this.fileInfo.permissions&OC.PERMISSION_SHARE)||!!(this.reshare&&this.reshare.hasSharePermission&&this.config.isResharingAllowed)},internalShareInputPlaceholder(){return this.config.showFederatedSharesAsInternal&&this.config.isFederationEnabled?t("files_sharing","Type names, teams, federated cloud IDs"):t("files_sharing","Type names or teams")},externalShareInputPlaceholder(){return this.isLinkSharingAllowed?this.config.showFederatedSharesAsInternal||this.config.isFederationEnabled?t("files_sharing","Type an email or federated cloud ID"):t("files_sharing","Type an email"):this.config.isFederationEnabled?t("files_sharing","Type a federated cloud ID"):""}},methods:{async update(e){this.fileInfo=e,this.resetState(),this.getShares()},async getShares(){try{this.loading=!0;const e=(0,l.KT)("apps/files_sharing/api/v1/shares"),t="json",i=(this.fileInfo.path+"/"+this.fileInfo.name).replace("//","/"),s=A.Ay.get(e,{params:{format:t,path:i,reshares:!0}}),a=A.Ay.get(e,{params:{format:t,path:i,shared_with_me:!0}}),[n,r]=await Promise.all([s,a]);this.loading=!1,this.processSharedWithMe(r),this.processShares(n)}catch(e){this.error=e?.response?.data?.ocs?.meta?.message?e.response.data.ocs.meta.message:t("files_sharing","Unable to load the shares list"),this.loading=!1,console.error("Error loading the shares list",e)}},resetState(){clearInterval(this.expirationInterval),this.loading=!0,this.error="",this.sharedWithMe={},this.shares=[],this.linkShares=[],this.showSharingDetailsView=!1,this.shareDetailsData={}},updateExpirationSubtitle(e){const i=(0,g.A)(e.expireDate).unix();this.$set(this.sharedWithMe,"subtitle",t("files_sharing","Expires {relativetime}",{relativetime:(0,g.A)(1e3*i).fromNow()})),(0,g.A)().unix()>i&&(clearInterval(this.expirationInterval),this.$set(this.sharedWithMe,"subtitle",t("files_sharing","this share just expired.")))},processShares(e){let{data:t}=e;if(t.ocs&&t.ocs.data&&t.ocs.data.length>0){const e=(0,r.My)(t.ocs.data.map(e=>new C(e)),[e=>e.shareWithDisplayName,e=>e.label,e=>e.createdTime]);for(const t of e)[c.I.Link,c.I.Email].includes(t.type)?this.linkShares.push(t):[c.I.Remote,c.I.RemoteGroup].includes(t.type)?this.config.showFederatedSharesToTrustedServersAsInternal?t.isTrustedServer?this.shares.push(t):this.externalShares.push(t):this.config.showFederatedSharesAsInternal?this.shares.push(t):this.externalShares.push(t):this.shares.push(t);_.A.debug(`Processed ${this.linkShares.length} link share(s)`),_.A.debug(`Processed ${this.shares.length} share(s)`),_.A.debug(`Processed ${this.externalShares.length} external share(s)`)}},processSharedWithMe(e){let{data:i}=e;if(i.ocs&&i.ocs.data&&i.ocs.data[0]){const e=new C(i),s=function(e){return e.type===c.I.Group?t("files_sharing","Shared with you and the group {group} by {owner}",{group:e.shareWithDisplayName,owner:e.ownerDisplayName},void 0,{escape:!1}):e.type===c.I.Team?t("files_sharing","Shared with you and {circle} by {owner}",{circle:e.shareWithDisplayName,owner:e.ownerDisplayName},void 0,{escape:!1}):e.type===c.I.Room?e.shareWithDisplayName?t("files_sharing","Shared with you and the conversation {conversation} by {owner}",{conversation:e.shareWithDisplayName,owner:e.ownerDisplayName},void 0,{escape:!1}):t("files_sharing","Shared with you in a conversation by {owner}",{owner:e.ownerDisplayName},void 0,{escape:!1}):t("files_sharing","Shared with you by {owner}",{owner:e.ownerDisplayName},void 0,{escape:!1})}(e),a=e.ownerDisplayName,n=e.owner;this.sharedWithMe={displayName:a,title:s,user:n},this.reshare=e,e.expireDate&&(0,g.A)(e.expireDate).unix()>(0,g.A)().unix()&&(this.updateExpirationSubtitle(e),this.expirationInterval=setInterval(this.updateExpirationSubtitle,1e4,e))}else this.fileInfo&&void 0!==this.fileInfo.shareOwnerId&&this.fileInfo.shareOwnerId!==(0,a.HW)().uid&&(this.sharedWithMe={displayName:this.fileInfo.shareOwner,title:t("files_sharing","Shared with you by {owner}",{owner:this.fileInfo.shareOwner},void 0,{escape:!1}),user:this.fileInfo.shareOwnerId})},addShare(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};e.type===c.I.Email?this.linkShares.unshift(e):[c.I.Remote,c.I.RemoteGroup].includes(e.type)?(this.config.showFederatedSharesAsInternal&&this.shares.unshift(e),this.config.showFederatedSharesToTrustedServersAsInternal?e.isTrustedServer&&this.shares.unshift(e):this.externalShares.unshift(e)):this.shares.unshift(e),this.awaitForShare(e,t)},removeShare(e){const t=e.type===c.I.Email||e.type===c.I.Link?this.linkShares:this.shares,i=t.findIndex(t=>t.id===e.id);-1!==i&&t.splice(i,1)},awaitForShare(e,t){this.$nextTick(()=>{let i=this.$refs.shareList;e.type===c.I.Email&&(i=this.$refs.linkShareList);const s=i.$children.find(t=>t.share===e);s&&t(s)})},toggleShareDetailsView(e){if(!this.showSharingDetailsView)if(Array.from(document.activeElement.classList).some(e=>e.startsWith("action-"))){const e=document.activeElement.closest('[role="menu"]')?.id;this.returnFocusElement=document.querySelector(`[aria-controls="${e}"]`)}else this.returnFocusElement=document.activeElement;e&&(this.shareDetailsData=e),this.showSharingDetailsView=!this.showSharingDetailsView,this.showSharingDetailsView||this.$nextTick(()=>{this.returnFocusElement?.focus(),this.returnFocusElement=null})}}},hi=ci;var di=s(88675),ui={};ui.styleTagTransform=V(),ui.setAttributes=L(),ui.insert=N().bind(null,"head"),ui.domAPI=D(),ui.insertStyleElement=O(),T()(di.A,ui),di.A&&di.A.locals&&di.A.locals;const pi=(0,$.A)(hi,function(){var e=this,t=e._self._c;return t("div",{staticClass:"sharingTab",class:{"icon-loading":e.loading}},[e.error?t("div",{staticClass:"emptycontent",class:{emptyContentWithSections:e.hasExternalSections}},[t("div",{staticClass:"icon icon-error"}),e._v(" "),t("h2",[e._v(e._s(e.error))])]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showSharingDetailsView,expression:"!showSharingDetailsView"}],staticClass:"sharingTab__content"},[e.isSharedWithMe?t("ul",[t("SharingEntrySimple",e._b({staticClass:"sharing-entry__reshare",scopedSlots:e._u([{key:"avatar",fn:function(){return[t("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{user:e.sharedWithMe.user,"display-name":e.sharedWithMe.displayName}})]},proxy:!0}],null,!1,3197855346)},"SharingEntrySimple",e.sharedWithMe,!1))],1):e._e(),e._v(" "),t("section",[t("div",{staticClass:"section-header"},[t("h4",[e._v(e._s(e.t("files_sharing","Internal shares")))]),e._v(" "),t("NcPopover",{attrs:{"popup-role":"dialog"},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("NcButton",{staticClass:"hint-icon",attrs:{type:"tertiary-no-background","aria-label":e.t("files_sharing","Internal shares explanation")},scopedSlots:e._u([{key:"icon",fn:function(){return[t("InfoIcon",{attrs:{size:20}})]},proxy:!0}])})]},proxy:!0}])},[e._v(" "),t("p",{staticClass:"hint-body"},[e._v("\n\t\t\t\t\t\t"+e._s(e.internalSharesHelpText)+"\n\t\t\t\t\t")])])],1),e._v(" "),e.loading?e._e():t("SharingInput",{attrs:{"can-reshare":e.canReshare,"file-info":e.fileInfo,"link-shares":e.linkShares,reshare:e.reshare,shares:e.shares,placeholder:e.internalShareInputPlaceholder},on:{"open-sharing-details":e.toggleShareDetailsView}}),e._v(" "),e.loading?e._e():t("SharingList",{ref:"shareList",attrs:{shares:e.shares,"file-info":e.fileInfo},on:{"open-sharing-details":e.toggleShareDetailsView}}),e._v(" "),e.canReshare&&!e.loading?t("SharingInherited",{attrs:{"file-info":e.fileInfo}}):e._e(),e._v(" "),t("SharingEntryInternal",{attrs:{"file-info":e.fileInfo}})],1),e._v(" "),t("section",[t("div",{staticClass:"section-header"},[t("h4",[e._v(e._s(e.t("files_sharing","External shares")))]),e._v(" "),t("NcPopover",{attrs:{"popup-role":"dialog"},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("NcButton",{staticClass:"hint-icon",attrs:{type:"tertiary-no-background","aria-label":e.t("files_sharing","External shares explanation")},scopedSlots:e._u([{key:"icon",fn:function(){return[t("InfoIcon",{attrs:{size:20}})]},proxy:!0}])})]},proxy:!0}])},[e._v(" "),t("p",{staticClass:"hint-body"},[e._v("\n\t\t\t\t\t\t"+e._s(e.externalSharesHelpText)+"\n\t\t\t\t\t")])])],1),e._v(" "),e.loading?e._e():t("SharingInput",{attrs:{"can-reshare":e.canReshare,"file-info":e.fileInfo,"link-shares":e.linkShares,"is-external":!0,placeholder:e.externalShareInputPlaceholder,reshare:e.reshare,shares:e.shares},on:{"open-sharing-details":e.toggleShareDetailsView}}),e._v(" "),e.loading?e._e():t("SharingList",{attrs:{shares:e.externalShares,"file-info":e.fileInfo},on:{"open-sharing-details":e.toggleShareDetailsView}}),e._v(" "),!e.loading&&e.isLinkSharingAllowed?t("SharingLinkList",{ref:"linkShareList",attrs:{"can-reshare":e.canReshare,"file-info":e.fileInfo,shares:e.linkShares},on:{"open-sharing-details":e.toggleShareDetailsView}}):e._e()],1),e._v(" "),e.hasExternalSections&&!e.showSharingDetailsView?t("section",[t("div",{staticClass:"section-header"},[t("h4",[e._v(e._s(e.t("files_sharing","Additional shares")))]),e._v(" "),t("NcPopover",{attrs:{"popup-role":"dialog"},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("NcButton",{staticClass:"hint-icon",attrs:{type:"tertiary-no-background","aria-label":e.t("files_sharing","Additional shares explanation")},scopedSlots:e._u([{key:"icon",fn:function(){return[t("InfoIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,915383693)})]},proxy:!0}],null,!1,1027936137)},[e._v(" "),t("p",{staticClass:"hint-body"},[e._v("\n\t\t\t\t\t\t"+e._s(e.additionalSharesHelpText)+"\n\t\t\t\t\t")])])],1),e._v(" "),e._l(e.sortedExternalSections,function(i){return t("SidebarTabExternalSection",{key:i.id,staticClass:"sharingTab__additionalContent",attrs:{section:i,node:e.fileInfo.node}})}),e._v(" "),e._l(e.legacySections,function(i,s){return t("SidebarTabExternalSectionLegacy",{key:s,staticClass:"sharingTab__additionalContent",attrs:{"file-info":e.fileInfo,"section-callback":i}})}),e._v(" "),e.projectsEnabled?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showSharingDetailsView&&e.fileInfo,expression:"!showSharingDetailsView && fileInfo"}],staticClass:"sharingTab__additionalContent"},[t("NcCollectionList",{attrs:{id:`${e.fileInfo.id}`,type:"file",name:e.fileInfo.name}})],1):e._e()],2):e._e()]),e._v(" "),e.showSharingDetailsView?t("SharingDetailsTab",{attrs:{"file-info":e.shareDetailsData.fileInfo,share:e.shareDetailsData.share},on:{"close-sharing-details":e.toggleShareDetailsView,"add:share":e.addShare,"remove:share":e.removeShare}}):e._e()],1)},[],!1,null,"5effe996",null).exports},88675:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".emptyContentWithSections[data-v-5effe996]{margin:1rem auto}.sharingTab[data-v-5effe996]{position:relative;height:100%}.sharingTab__content[data-v-5effe996]{padding:0 6px}.sharingTab__content section[data-v-5effe996]{padding-bottom:16px}.sharingTab__content section .section-header[data-v-5effe996]{margin-top:2px;margin-bottom:2px;display:flex;align-items:center;padding-bottom:4px}.sharingTab__content section .section-header h4[data-v-5effe996]{margin:0;font-size:16px}.sharingTab__content section .section-header .visually-hidden[data-v-5effe996]{display:none}.sharingTab__content section .section-header .hint-icon[data-v-5effe996]{color:var(--color-primary-element)}.sharingTab__content>section[data-v-5effe996]:not(:last-child){border-bottom:2px solid var(--color-border)}.sharingTab__additionalContent[data-v-5effe996]{margin:var(--default-clickable-area) 0}.hint-body[data-v-5effe996]{max-width:300px;padding:var(--border-radius-element)}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingTab.vue"],names:[],mappings:"AACA,2CACC,gBAAA,CAGD,6BACC,iBAAA,CACA,WAAA,CAEA,sCACC,aAAA,CAEA,8CACC,mBAAA,CAEA,8DACC,cAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,kBAAA,CAEA,iEACC,QAAA,CACA,cAAA,CAGD,+EACC,YAAA,CAGD,yEACC,kCAAA,CAOH,+DACC,2CAAA,CAKF,gDACC,sCAAA,CAIF,4BACC,eAAA,CACA,oCAAA",sourcesContent:["\n.emptyContentWithSections {\n\tmargin: 1rem auto;\n}\n\n.sharingTab {\n\tposition: relative;\n\theight: 100%;\n\n\t&__content {\n\t\tpadding: 0 6px;\n\n\t\tsection {\n\t\t\tpadding-bottom: 16px;\n\n\t\t\t.section-header {\n\t\t\t\tmargin-top: 2px;\n\t\t\t\tmargin-bottom: 2px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding-bottom: 4px;\n\n\t\t\t\th4 {\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t}\n\n\t\t\t\t.visually-hidden {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.hint-icon {\n\t\t\t\t\tcolor: var(--color-primary-element);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t& > section:not(:last-child) {\n\t\t\tborder-bottom: 2px solid var(--color-border);\n\t\t}\n\n\t}\n\n\t&__additionalContent {\n\t\tmargin: var(--default-clickable-area) 0;\n\t}\n}\n\n.hint-body {\n\tmax-width: 300px;\n\tpadding: var(--border-radius-element);\n}\n"],sourceRoot:""}]);const o=r},89669:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var s=i(71354),a=i.n(s),n=i(76314),r=i.n(n)()(a());r.push([e.id,".sharing-entry[data-v-ca5c9f60]{display:flex;align-items:center;min-height:44px}.sharing-entry__summary[data-v-ca5c9f60]{padding:8px;padding-inline-start:10px;display:flex;justify-content:space-between;flex:1 0;min-width:0}.sharing-entry__desc[data-v-ca5c9f60]{display:flex;flex-direction:column;line-height:1.2em}.sharing-entry__desc p[data-v-ca5c9f60]{color:var(--color-text-maxcontrast)}.sharing-entry__desc__title[data-v-ca5c9f60]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.sharing-entry__actions[data-v-ca5c9f60]{display:flex;align-items:center;margin-inline-start:auto}.sharing-entry:not(.sharing-entry--share) .sharing-entry__actions .new-share-link[data-v-ca5c9f60]{border-top:1px solid var(--color-border)}.sharing-entry[data-v-ca5c9f60] .avatar-link-share{background-color:var(--color-primary-element)}.sharing-entry .sharing-entry__action--public-upload[data-v-ca5c9f60]{border-bottom:1px solid var(--color-border)}.sharing-entry__loading[data-v-ca5c9f60]{width:44px;height:44px;margin:0;padding:14px;margin-inline-start:auto}.sharing-entry .action-item~.action-item[data-v-ca5c9f60],.sharing-entry .action-item~.sharing-entry__loading[data-v-ca5c9f60]{margin-inline-start:0}.sharing-entry__copy-icon--success[data-v-ca5c9f60]{color:var(--color-border-success)}.qr-code-dialog[data-v-ca5c9f60]{display:flex;width:100%;justify-content:center}.qr-code-dialog__img[data-v-ca5c9f60]{width:100%;height:auto}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryLink.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CAEA,yCACC,WAAA,CACA,yBAAA,CACA,YAAA,CACA,6BAAA,CACA,QAAA,CACA,WAAA,CAGA,sCACC,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,wCACC,mCAAA,CAGD,6CACC,sBAAA,CACA,eAAA,CACA,kBAAA,CAIF,yCACC,YAAA,CACA,kBAAA,CACA,wBAAA,CAID,mGACC,wCAAA,CAIF,mDACC,6CAAA,CAGD,sEACC,2CAAA,CAGD,yCACC,UAAA,CACA,WAAA,CACA,QAAA,CACA,YAAA,CACA,wBAAA,CAOA,+HAEC,qBAAA,CAIF,oDACC,iCAAA,CAKF,iCACC,YAAA,CACA,UAAA,CACA,sBAAA,CAEA,sCACC,UAAA,CACA,WAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\n\t&__summary {\n\t\tpadding: 8px;\n\t\tpadding-inline-start: 10px;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\tflex: 1 0;\n\t\tmin-width: 0;\n\t}\n\n\t\t&__desc {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tline-height: 1.2em;\n\n\t\t\tp {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\n\t\t\t&__title {\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\toverflow: hidden;\n\t\t\t\twhite-space: nowrap;\n\t\t\t}\n\t\t}\n\n\t\t&__actions {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tmargin-inline-start: auto;\n\t\t}\n\n\t&:not(.sharing-entry--share) &__actions {\n\t\t.new-share-link {\n\t\t\tborder-top: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\t:deep(.avatar-link-share) {\n\t\tbackground-color: var(--color-primary-element);\n\t}\n\n\t.sharing-entry__action--public-upload {\n\t\tborder-bottom: 1px solid var(--color-border);\n\t}\n\n\t&__loading {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tpadding: 14px;\n\t\tmargin-inline-start: auto;\n\t}\n\n\t// put menus to the left\n\t// but only the first one\n\t.action-item {\n\n\t\t~.action-item,\n\t\t~.sharing-entry__loading {\n\t\t\tmargin-inline-start: 0;\n\t\t}\n\t}\n\n\t&__copy-icon--success {\n\t\tcolor: var(--color-border-success);\n\t}\n}\n\n// styling for the qr-code container\n.qr-code-dialog {\n\tdisplay: flex;\n\twidth: 100%;\n\tjustify-content: center;\n\n\t&__img {\n\t\twidth: 100%;\n\t\theight: auto;\n\t}\n}\n"],sourceRoot:""}]);const o=r}}]);
//# sourceMappingURL=8712-8712.js.map?v=8ee1f870c0bbd3eaf2a3